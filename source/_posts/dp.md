---
title: ã€ç®—æ³•åŸºç¡€ã€‘åŠ¨æ€è§„åˆ’ï¼ˆDynamic Programmingï¼‰
date: 2023-02-24 15:03:26
tags: [ç®—æ³•, åŠ¨æ€è§„åˆ’]
math: true
---

åŠ¨æ€è§„åˆ’å¯ä»¥åº”ç”¨äºå¤šç§é—®é¢˜ï¼Œä¾‹å¦‚èƒŒåŒ…é—®é¢˜ã€æœ€é•¿å…¬å…±å­åºåˆ—ã€æœ€çŸ­è·¯å¾„é—®é¢˜ç­‰ã€‚
å…¶çµæ´»æ€§ä¹Ÿå¯¼è‡´äº†æ­¤ç±»é¢˜æ²¡æœ‰å›ºå®šçš„ç®—æ³•æ¨¡æ¿ï¼Œè“æ¡¥æ¯çœèµ›å°†è‡³ï¼Œå°†æˆ‘ä¹‹å‰çš„é›¶æ•£çš„ç¬”è®°æ•´ç†ä¸€ä¸‹ã€‚
åç»­ä¼šå®Œå–„æ®‹ç¼ºçš„é¢˜ç›®ï¼Œå¹¶ä¸”ä¸ºä»£ç åŠ ä¸Šè¯¦ç»†æ³¨é‡Šã€‚


<!-- more -->

# æ•°å­—ä¸‰è§’å½¢æ¨¡å‹

## ****[898.æ•°å­—ä¸‰è§’å½¢](https://www.acwing.com/problem/content/900/)****

- é¢˜ç›®
    
    ç»™å®šä¸€ä¸ªå¦‚ä¸‹å›¾æ‰€ç¤ºçš„æ•°å­—ä¸‰è§’å½¢ï¼Œä»é¡¶éƒ¨å‡ºå‘ï¼Œåœ¨æ¯ä¸€ç»“ç‚¹å¯ä»¥é€‰æ‹©ç§»åŠ¨è‡³å…¶å·¦ä¸‹æ–¹çš„ç»“ç‚¹æˆ–ç§»åŠ¨è‡³å…¶å³ä¸‹æ–¹çš„ç»“ç‚¹ï¼Œä¸€ç›´èµ°åˆ°åº•å±‚ï¼Œè¦æ±‚æ‰¾å‡ºä¸€æ¡è·¯å¾„ï¼Œä½¿è·¯å¾„ä¸Šçš„æ•°å­—çš„å’Œæœ€å¤§ã€‚
    
    ```
            7
          3   8
        8   1   0
      2   7   4   4
    4   5   2   6   5
    ```
    
    ### è¾“å…¥æ ¼å¼
    
    ç¬¬ä¸€è¡ŒåŒ…å«æ•´æ•° nï¼Œè¡¨ç¤ºæ•°å­—ä¸‰è§’å½¢çš„å±‚æ•°ã€‚
    
    æ¥ä¸‹æ¥ n è¡Œï¼Œæ¯è¡ŒåŒ…å«è‹¥å¹²æ•´æ•°ï¼Œå…¶ä¸­ç¬¬ i è¡Œè¡¨ç¤ºæ•°å­—ä¸‰è§’å½¢ç¬¬ i å±‚åŒ…å«çš„æ•´æ•°ã€‚
    
    ### è¾“å‡ºæ ¼å¼
    
    è¾“å‡ºä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºæœ€å¤§çš„è·¯å¾„æ•°å­—å’Œã€‚
    
    ### æ•°æ®èŒƒå›´
    
    $1 \\le n \\le 500$,
    $\-10000 \\le ä¸‰è§’å½¢ä¸­çš„æ•´æ•° \\le 10000$
    
    ### è¾“å…¥æ ·ä¾‹ï¼š
    
    ```
    5
    7
    3 8
    8 1 0
    2 7 4 4
    4 5 2 6 5
    ```
    
    ### è¾“å‡ºæ ·ä¾‹ï¼š
    
    ```
    30
    ```
    
- è§£ç­”
    
    ```cpp
    #include <iostream>
    #include <cstring>
    #include <algorithm>
     
    using namespace std;
    const int maxn = 510;
    int a[maxn][maxn];
     
    int main()
    {
    	int n;
        cin >> n;
        for (int i = 1; i <= n; i ++ )
        {
        	for (int j = 1; j <= i; j ++ )
        	{
        		cin >> a[i][j];
    		}
    	}                    
        for (int i = n - 1; i; i -- )
        {
        	for (int j = 1; j <= i; j ++ )
        	{
        		a[i][j] += max(a[i + 1][j], a[i + 1][j + 1]);
    		}
    	}                    
        cout << a[1][1] << endl;
        return 0;
    }
    ```
    

## ****[1015.æ‘˜èŠ±ç”Ÿ](https://www.acwing.com/problem/content/1017/)****

- é¢˜ç›®
    
    Hello Kittyæƒ³æ‘˜ç‚¹èŠ±ç”Ÿé€ç»™å¥¹å–œæ¬¢çš„ç±³è€é¼ ã€‚
    
    å¥¹æ¥åˆ°ä¸€ç‰‡æœ‰ç½‘æ ¼çŠ¶é“è·¯çš„çŸ©å½¢èŠ±ç”Ÿåœ°(å¦‚ä¸‹å›¾)ï¼Œä»è¥¿åŒ—è§’è¿›å»ï¼Œä¸œå—è§’å‡ºæ¥ã€‚
    
    åœ°é‡Œæ¯ä¸ªé“è·¯çš„äº¤å‰ç‚¹ä¸Šéƒ½æœ‰ç§ç€ä¸€æ ªèŠ±ç”Ÿè‹—ï¼Œä¸Šé¢æœ‰è‹¥å¹²é¢—èŠ±ç”Ÿï¼Œç»è¿‡ä¸€æ ªèŠ±ç”Ÿè‹—å°±èƒ½æ‘˜èµ°è¯¥å®ƒä¸Šé¢æ‰€æœ‰çš„èŠ±ç”Ÿã€‚
    
    Hello Kittyåªèƒ½å‘ä¸œæˆ–å‘å—èµ°ï¼Œä¸èƒ½å‘è¥¿æˆ–å‘åŒ—èµ°ã€‚
    
    é—®Hello Kittyæœ€å¤šèƒ½å¤Ÿæ‘˜åˆ°å¤šå°‘é¢—èŠ±ç”Ÿã€‚
    
    ![https://cdn.acwing.com/media/article/image/2019/09/12/19_a8509f26d5-1.gif](https://cdn.acwing.com/media/article/image/2019/09/12/19_a8509f26d5-1.gif)
    
    ### è¾“å…¥æ ¼å¼
    
    ç¬¬ä¸€è¡Œæ˜¯ä¸€ä¸ªæ•´æ•°Tï¼Œä»£è¡¨ä¸€å…±æœ‰å¤šå°‘ç»„æ•°æ®ã€‚
    
    æ¥ä¸‹æ¥æ˜¯Tç»„æ•°æ®ã€‚
    
    æ¯ç»„æ•°æ®çš„ç¬¬ä¸€è¡Œæ˜¯ä¸¤ä¸ªæ•´æ•°ï¼Œåˆ†åˆ«ä»£è¡¨èŠ±ç”Ÿè‹—çš„è¡Œæ•°Rå’Œåˆ—æ•° Cã€‚
    
    æ¯ç»„æ•°æ®çš„æ¥ä¸‹æ¥Rè¡Œæ•°æ®ï¼Œä»åŒ—å‘å—ä¾æ¬¡æè¿°æ¯è¡ŒèŠ±ç”Ÿè‹—çš„æƒ…å†µã€‚æ¯è¡Œæ•°æ®æœ‰Cä¸ªæ•´æ•°ï¼ŒæŒ‰ä»è¥¿å‘ä¸œçš„é¡ºåºæè¿°äº†è¯¥è¡Œæ¯æ ªèŠ±ç”Ÿè‹—ä¸Šçš„èŠ±ç”Ÿæ•°ç›®Mã€‚
    
    ### è¾“å‡ºæ ¼å¼
    
    å¯¹æ¯ç»„è¾“å…¥æ•°æ®ï¼Œè¾“å‡ºä¸€è¡Œï¼Œå†…å®¹ä¸ºHello Kittyèƒ½æ‘˜åˆ°å¾—æœ€å¤šçš„èŠ±ç”Ÿé¢—æ•°ã€‚
    
    ### æ•°æ®èŒƒå›´
    
    $1 \\le T \\le 100$,
    $1 \\le R,C \\le 100$,
    $0 \\le M \\le 1000$
    
    ### è¾“å…¥æ ·ä¾‹ï¼š
    
    ```
    2
    2 2
    1 1
    3 4
    2 3
    2 3 4
    1 6 5
    ```
    
    ### è¾“å‡ºæ ·ä¾‹ï¼š
    
    ```
    8
    16
    ```
    
- è§£ç­”
    
    ```cpp
    #include <iostream>
    #include <algorithm>
    
    using namespace std;
    
    const int N = 110;
    
    int n, m;
    int w[N][N];
    int f[N][N];
    
    int main()
    {
        int T;
        scanf("%d", &T);
        while (T -- )
        {
            scanf("%d%d", &n, &m);
            for (int i = 1; i <= n; i ++ )
                for (int j = 1; j <= m; j ++ )
                    scanf("%d", &w[i][j]);
    
            for (int i = 1; i <= n; i ++ )
                for (int j = 1; j <= m; j ++ )
                    f[i][j] = max(f[i - 1][j], f[i][j - 1]) + w[i][j];
    
            printf("%d\n", f[n][m]);
        }
    
        return 0;
    }
    ```
    

## å…¨æ–°çš„DPé—®é¢˜æ€è€ƒæ–¹å¼â€”â€”ä»é›†åˆçš„è§’åº¦æ¥è€ƒè™‘é—®é¢˜

![åŠ¨æ€è§„åˆ’ (1).png](/img/group.png)

## ****[1018. æœ€ä½é€šè¡Œè´¹](https://www.acwing.com/problem/content/1020/)****

- é¢˜ç›®
    
    ä¸€ä¸ªå•†äººç©¿è¿‡ä¸€ä¸ª NÃ—N çš„æ­£æ–¹å½¢çš„ç½‘æ ¼ï¼Œå»å‚åŠ ä¸€ä¸ªéå¸¸é‡è¦çš„å•†åŠ¡æ´»åŠ¨ã€‚
    
    ä»–è¦ä»ç½‘æ ¼çš„å·¦ä¸Šè§’è¿›ï¼Œå³ä¸‹è§’å‡ºã€‚
    
    æ¯ç©¿è¶Šä¸­é—´ 1 ä¸ªå°æ–¹æ ¼ï¼Œéƒ½è¦èŠ±è´¹ 1 ä¸ªå•ä½æ—¶é—´ã€‚
    
    **å•†äººå¿…é¡»åœ¨ (2N-1) ä¸ªå•ä½æ—¶é—´ç©¿è¶Šå‡ºå»**ã€‚
    
    è€Œåœ¨ç»è¿‡ä¸­é—´çš„æ¯ä¸ªå°æ–¹æ ¼æ—¶ï¼Œéƒ½éœ€è¦ç¼´çº³ä¸€å®šçš„è´¹ç”¨ã€‚
    
    è¿™ä¸ªå•†äººæœŸæœ›åœ¨è§„å®šæ—¶é—´å†…ç”¨æœ€å°‘è´¹ç”¨ç©¿è¶Šå‡ºå»ã€‚
    
    è¯·é—®è‡³å°‘éœ€è¦å¤šå°‘è´¹ç”¨ï¼Ÿ
    
    æ³¨æ„ï¼šä¸èƒ½å¯¹è§’ç©¿è¶Šå„ä¸ªå°æ–¹æ ¼ï¼ˆå³ï¼Œåªèƒ½å‘ä¸Šä¸‹å·¦å³å››ä¸ªæ–¹å‘ç§»åŠ¨ä¸”ä¸èƒ½ç¦»å¼€ç½‘æ ¼ï¼‰ã€‚
    
    ### è¾“å…¥æ ¼å¼
    
    ç¬¬ä¸€è¡Œæ˜¯ä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºæ­£æ–¹å½¢çš„å®½åº¦ Nã€‚
    
    åé¢ N è¡Œï¼Œæ¯è¡Œ N ä¸ªä¸å¤§äº 100 çš„æ­£æ•´æ•°ï¼Œä¸ºç½‘æ ¼ä¸Šæ¯ä¸ªå°æ–¹æ ¼çš„è´¹ç”¨ã€‚
    
    ### è¾“å‡ºæ ¼å¼
    
    è¾“å‡ºä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºè‡³å°‘éœ€è¦çš„è´¹ç”¨ã€‚
    
    ### æ•°æ®èŒƒå›´
    
    $1 \\le N \\le 100$
    
    ### è¾“å…¥æ ·ä¾‹ï¼š
    
    ```
    5
    1  4  6  8  10
    2  5  7  15 17
    6  8  9  18 20
    10 11 12 19 21
    20 23 25 29 33
    ```
    
    ### è¾“å‡ºæ ·ä¾‹ï¼š
    
    ```
    109
    ```
    
    ### æ ·ä¾‹è§£é‡Š
    
    æ ·ä¾‹ä¸­ï¼Œæœ€å°å€¼ä¸º 109=1+2+5+7+9+12+19+21+33ã€‚
    
- è§£ç­”
    
    å•†äººè¦åœ¨2N-1çš„æ—¶é—´å†…å‡ºå»ï¼Œè¯´æ˜å•†äººä¸èƒ½èµ°å›å¤´è·¯ã€‚
    
    å³åªèƒ½å‘ä¸‹æˆ–è€…å‘å³ç§»åŠ¨ã€‚
    
    ```cpp
    #include<iostream>
    #include<algorithm>
    const int N = 110, INF = 1e9;
    
    int f[N][N], w[N][N];
    
    using namespace std;
    
    int main(){
        int n;
        scanf("%d", &n);
        
        for(int i = 1; i <= n; ++ i)
            for(int j = 1; j <= n; ++ j)
                scanf("%d", &w[i][j]);
                
        for(int i = 1; i <= n; ++ i)
            for(int j = 1; j <= n; ++ j)
                if(i == 1 && j == 1) f[i][j] = w[i][j];
                else {
                    f[i][j] = INF;
                    if(i > 1) f[i][j] = min(f[i][j], f[i - 1][j] + w[i][j]);
                    if(j > 1) f[i][j] = min(f[i][j], f[i][j - 1] + w[i][j]);
                }
                
        printf("%d", f[n][n]);
        return 0;
    }
    ```
    

## ****[1027.æ–¹æ ¼å–æ•°](https://www.acwing.com/problem/content/1029/)****

- é¢˜ç›®
    
    è®¾æœ‰ NÃ—N çš„æ–¹æ ¼å›¾ï¼Œæˆ‘ä»¬åœ¨å…¶ä¸­çš„æŸäº›æ–¹æ ¼ä¸­å¡«å…¥æ­£æ•´æ•°ï¼Œè€Œå…¶å®ƒçš„æ–¹æ ¼ä¸­åˆ™æ”¾å…¥æ•°å­—0ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š
    
    ![https://cdn.acwing.com/media/article/image/2019/09/12/19_764ece6ed5-2.gif](https://cdn.acwing.com/media/article/image/2019/09/12/19_764ece6ed5-2.gif)
    
    æŸäººä»å›¾ä¸­çš„å·¦ä¸Šè§’ A å‡ºå‘ï¼Œå¯ä»¥å‘ä¸‹è¡Œèµ°ï¼Œä¹Ÿå¯ä»¥å‘å³è¡Œèµ°ï¼Œç›´åˆ°åˆ°è¾¾å³ä¸‹è§’çš„ B ç‚¹ã€‚
    
    åœ¨èµ°è¿‡çš„è·¯ä¸Šï¼Œä»–å¯ä»¥å–èµ°æ–¹æ ¼ä¸­çš„æ•°ï¼ˆå–èµ°åçš„æ–¹æ ¼ä¸­å°†å˜ä¸ºæ•°å­—0ï¼‰ã€‚
    
    æ­¤äººä» A ç‚¹åˆ° B ç‚¹å…±èµ°äº†ä¸¤æ¬¡ï¼Œè¯•æ‰¾å‡ºä¸¤æ¡è¿™æ ·çš„è·¯å¾„ï¼Œä½¿å¾—å–å¾—çš„æ•°å­—å’Œä¸ºæœ€å¤§ã€‚
    
    ### è¾“å…¥æ ¼å¼
    
    ç¬¬ä¸€è¡Œä¸ºä¸€ä¸ªæ•´æ•°Nï¼Œè¡¨ç¤º NÃ—N çš„æ–¹æ ¼å›¾ã€‚
    
    æ¥ä¸‹æ¥çš„æ¯è¡Œæœ‰ä¸‰ä¸ªæ•´æ•°ï¼Œç¬¬ä¸€ä¸ªä¸ºè¡Œå·æ•°ï¼Œç¬¬äºŒä¸ªä¸ºåˆ—å·æ•°ï¼Œç¬¬ä¸‰ä¸ªä¸ºåœ¨è¯¥è¡Œã€è¯¥åˆ—ä¸Šæ‰€æ”¾çš„æ•°ã€‚
    
    è¡Œå’Œåˆ—ç¼–å·ä» 1 å¼€å§‹ã€‚
    
    ä¸€è¡Œâ€œ0 0 0â€è¡¨ç¤ºç»“æŸã€‚
    
    ### è¾“å‡ºæ ¼å¼
    
    è¾“å‡ºä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºä¸¤æ¡è·¯å¾„ä¸Šå–å¾—çš„æœ€å¤§çš„å’Œã€‚
    
    ### æ•°æ®èŒƒå›´
    
    $N \\le 10$
    
    ### è¾“å…¥æ ·ä¾‹ï¼š
    
    ```
    8
    2 3 13
    2 6 6
    3 5 7
    4 4 14
    5 2 21
    5 6 4
    6 3 15
    7 2 14
    0 0 0
    ```
    
    ### è¾“å‡ºæ ·ä¾‹ï¼š
    
    ```
    67
    ```
    
- è§£ç­”
    
    ğŸ‘‡åœ¨æ­¤é¢˜ä¸­â€œæœ€ä¼˜è§£ä¸€å®šä¸ä¼šç”±ä¸¤æ®µç›¸äº¤çš„è·¯å¾„ç»„æˆâ€
    
    æ–‡ç« ï¼š[AcWing 275. è¯æ˜ä¼ çº¸æ¡ä¸ºä½•å¯ä»¥ä½¿ç”¨æ–¹æ ¼å–æ•°çš„ä»£ç ](https://www.acwing.com/solution/content/12389/)
    
    åŒä¸€ä¸ªæ ¼å­ä¸èƒ½è¢«é‡å¤é€‰æ‹©
    
    ä¸èƒ½åˆ†ä¸¤æ­¥è¿›è¡Œé€‰æ‹©ï¼Œå› ä¸ºä¸€æ¬¡çš„æœ€ä¼˜è§£ä¸ä¸€å®šæ˜¯æ•´ä½“çš„æœ€ä¼˜è§£
    
    å½“i1+j1==i2+j2æ—¶æ ¼å­æ‰æœ‰å¯èƒ½é‡åˆ
    
    ä»¤i1+j1=i2+j2=kï¼Œf[k, i1, i2]è¡¨ç¤ºä»(1, 1)åˆ†åˆ«èµ°åˆ°(i1, k-i1)å’Œ(i2, k-i2)çš„é›†åˆçš„æœ€å¤§å€¼
    
    ```cpp
    #include<iostream>
    using namespace std;
    
    const int N = 12;
    
    int w[N][N];
    
    int dp[N * 2][N][N];
    
    int main(){
        int n;
        scanf("%d", &n);
        
        int a, b ,c;
        
        while(cin >> a >> b >> c, a || b || c) w[a][b] = c;
        
        for(int k = 2; k <= 2 * n; k ++){
            for(int i1 = 1; i1 <= n; i1 ++){
                for(int i2 = 1; i2 <= n; i2 ++){
                    int j1 = k - i1, j2 = k - i2;
                    if(j1 >= 1 && j1 <= n && j2 >= 1 && j2 <= n){
                        int t = w[i1][j1];
                        if(i1 != i2) t += w[i2][j2];
                        int &x = dp[k][i1][i2];
                        x = max(x, dp[k - 1][i1 - 1][i2 - 1] + t);
                        x = max(x, dp[k - 1][i1 - 1][i2] + t);
                        x = max(x, dp[k - 1][i1][i2 - 1] + t);
                        x = max(x, dp[k - 1][i1][i2] + t);
                    }
                }
            }
        }
        
        printf("%d", dp[n * 2][n][n]);
        
        return 0;
        
    }
    ```
    

## ****[275.ä¼ çº¸æ¡](https://www.acwing.com/problem/content/277/)****

- é¢˜ç›®
    
    å°æ¸Šå’Œå°è½©æ˜¯å¥½æœ‹å‹ä¹Ÿæ˜¯åŒç­åŒå­¦ï¼Œä»–ä»¬åœ¨ä¸€èµ·æ€»æœ‰è°ˆä¸å®Œçš„è¯é¢˜ã€‚
    
    ä¸€æ¬¡ç´ è´¨æ‹“å±•æ´»åŠ¨ä¸­ï¼Œç­ä¸ŠåŒå­¦å®‰æ’åæˆä¸€ä¸ª $m$ è¡Œ $n$ åˆ—çš„çŸ©é˜µï¼Œè€Œå°æ¸Šå’Œå°è½©è¢«å®‰æ’åœ¨çŸ©é˜µå¯¹è§’çº¿çš„ä¸¤ç«¯ï¼Œå› æ­¤ï¼Œä»–ä»¬å°±æ— æ³•ç›´æ¥äº¤è°ˆäº†ã€‚
    
    å¹¸è¿çš„æ˜¯ï¼Œä»–ä»¬å¯ä»¥é€šè¿‡ä¼ çº¸æ¡æ¥è¿›è¡Œäº¤æµã€‚
    
    çº¸æ¡è¦ç»ç”±è®¸å¤šåŒå­¦ä¼ åˆ°å¯¹æ–¹æ‰‹é‡Œï¼Œå°æ¸Šååœ¨çŸ©é˜µçš„å·¦ä¸Šè§’ï¼Œåæ ‡ $(1,1)$ï¼Œå°è½©ååœ¨çŸ©é˜µçš„å³ä¸‹è§’ï¼Œåæ ‡ $(m,n)$ã€‚
    
    ä»å°æ¸Šä¼ åˆ°å°è½©çš„çº¸æ¡åªå¯ä»¥å‘ä¸‹æˆ–è€…å‘å³ä¼ é€’ï¼Œä»å°è½©ä¼ ç»™å°æ¸Šçš„çº¸æ¡åªå¯ä»¥å‘ä¸Šæˆ–è€…å‘å·¦ä¼ é€’ã€‚
    
    åœ¨æ´»åŠ¨è¿›è¡Œä¸­ï¼Œå°æ¸Šå¸Œæœ›ç»™å°è½©ä¼ é€’ä¸€å¼ çº¸æ¡ï¼ŒåŒæ—¶å¸Œæœ›å°è½©ç»™ä»–å›å¤ã€‚
    
    ç­é‡Œæ¯ä¸ªåŒå­¦éƒ½å¯ä»¥å¸®ä»–ä»¬ä¼ é€’ï¼Œä½†åªä¼šå¸®ä»–ä»¬ä¸€æ¬¡ï¼Œä¹Ÿå°±æ˜¯è¯´å¦‚æœæ­¤äººåœ¨å°æ¸Šé€’ç»™å°è½©çº¸æ¡çš„æ—¶å€™å¸®å¿™ï¼Œé‚£ä¹ˆåœ¨å°è½©é€’ç»™å°æ¸Šçš„æ—¶å€™å°±ä¸ä¼šå†å¸®å¿™ï¼Œåä¹‹äº¦ç„¶ã€‚
    
    è¿˜æœ‰ä¸€ä»¶äº‹æƒ…éœ€è¦æ³¨æ„ï¼Œå…¨ç­æ¯ä¸ªåŒå­¦æ„¿æ„å¸®å¿™çš„å¥½æ„Ÿåº¦æœ‰é«˜æœ‰ä½ï¼ˆæ³¨æ„ï¼šå°æ¸Šå’Œå°è½©çš„å¥½å¿ƒç¨‹åº¦æ²¡æœ‰å®šä¹‰ï¼Œè¾“å…¥æ—¶ç”¨ $0$ è¡¨ç¤ºï¼‰ï¼Œå¯ä»¥ç”¨ä¸€ä¸ª $0 \\sim 100$ çš„è‡ªç„¶æ•°æ¥è¡¨ç¤ºï¼Œæ•°è¶Šå¤§è¡¨ç¤ºè¶Šå¥½å¿ƒã€‚
    
    å°æ¸Šå’Œå°è½©å¸Œæœ›å°½å¯èƒ½æ‰¾å¥½å¿ƒç¨‹åº¦é«˜çš„åŒå­¦æ¥å¸®å¿™ä¼ çº¸æ¡ï¼Œå³æ‰¾åˆ°æ¥å›ä¸¤æ¡ä¼ é€’è·¯å¾„ï¼Œä½¿å¾—è¿™ä¸¤æ¡è·¯å¾„ä¸ŠåŒå­¦çš„å¥½å¿ƒç¨‹åº¦ä¹‹å’Œæœ€å¤§ã€‚
    
    ç°åœ¨ï¼Œè¯·ä½ å¸®åŠ©å°æ¸Šå’Œå°è½©æ‰¾åˆ°è¿™æ ·çš„ä¸¤æ¡è·¯å¾„ã€‚
    
    ### è¾“å…¥æ ¼å¼
    
    ç¬¬ä¸€è¡Œæœ‰ $2$ ä¸ªç”¨ç©ºæ ¼éš”å¼€çš„æ•´æ•° $m$ å’Œ $n$ï¼Œè¡¨ç¤ºå­¦ç”ŸçŸ©é˜µæœ‰ $m$ è¡Œ $n$ åˆ—ã€‚
    
    æ¥ä¸‹æ¥çš„ $m$ è¡Œæ˜¯ä¸€ä¸ª $m \\times n$ çš„çŸ©é˜µï¼ŒçŸ©é˜µä¸­ç¬¬ $i$ è¡Œ $j$ åˆ—çš„æ•´æ•°è¡¨ç¤ºååœ¨ç¬¬ $i$ è¡Œ $j$ åˆ—çš„å­¦ç”Ÿçš„å¥½å¿ƒç¨‹åº¦ï¼Œæ¯è¡Œçš„ $n$ ä¸ªæ•´æ•°ä¹‹é—´ç”¨ç©ºæ ¼éš”å¼€ã€‚
    
    ### è¾“å‡ºæ ¼å¼
    
    è¾“å‡ºä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºæ¥å›ä¸¤æ¡è·¯ä¸Šå‚ä¸ä¼ é€’çº¸æ¡çš„å­¦ç”Ÿçš„å¥½å¿ƒç¨‹åº¦ä¹‹å’Œçš„æœ€å¤§å€¼ã€‚
    
    ### æ•°æ®èŒƒå›´
    
    $1 \\le n,m \\le 50$
    
    ### è¾“å…¥æ ·ä¾‹ï¼š
    
    ```
    3 3
    0 3 9
    2 8 5
    5 7 0
    ```
    
    ### è¾“å‡ºæ ·ä¾‹ï¼š
    
    ```
    34
    ```
    
- è§£ç­”
    
    [AcWing 275. ä¼ çº¸æ¡, ä¸å¿…ä½¿ç”¨æ–¹æ ¼å–æ•°çš„ä»£ç , å¼ºåˆ¶ä¸è®©å…¶èµ°åŒä¸€ä¸ªæ ¼å­å³å¯](https://www.acwing.com/solution/content/57696/)
    
    ```cpp
    #include<iostream>
    using namespace std;
    
    const int N = 60, INF = 1e9;
    
    int w[N][N], f[N * 2][N][N];
    
    int main(){
        
        int n, m;
        cin >> m >> n;
        
        for(int i = 1; i <= m; i ++)
            for(int j = 1; j <= n; j ++)
                cin >> w[i][j];
                
        for(int k = 2; k <= n + m; k ++)
            for(int i1 = 1; i1 <= m; i1 ++)
                for(int i2 = 1; i2 <= m; i2 ++){
                    int j1 = k - i1, j2 = k - i2;
                    if(j1 >= 1 && j1 <= n && j2 >= 1 && j2 <= n){
                        if(i1 == i2 && k != m + n) {
                            f[k][i1][i2] = -INF;
                            continue;
                        }
                        int t = w[i1][j1] + w[i2][j2];
                        int &x = f[k][i1][i2];
                        x = max(x, f[k - 1][i1 - 1][i2 - 1] + t);
                        x = max(x, f[k - 1][i1][i2 - 1] + t);
                        x = max(x, f[k - 1][i1 - 1][i2] + t);
                        x = max(x, f[k - 1][i1][i2] + t);
                    }
                }
                
        cout << f[n + m][m][m];
        
        return 0;
    }
    ```


# æœ€é•¿ä¸Šå‡å­åºåˆ—æ¨¡å‹

**æœ€é•¿ä¸Šå‡å­åºåˆ—**ï¼ˆLongest Increasing Subsequenceï¼‰

![æœ€é•¿ä¸Šå‡å­åºåˆ—é—®é¢˜ (1).png](/img/LIS.png)

## ****[1017. æ€ªç›—åŸºå¾·çš„æ»‘ç¿”ç¿¼](https://www.acwing.com/activity/content/problem/content/1259/)****

- é¢˜ç›®
    
    æ€ªç›—åŸºå¾·æ˜¯ä¸€ä¸ªå……æ»¡ä¼ å¥‡è‰²å½©çš„æ€ªç›—ï¼Œä¸“é—¨ä»¥ç å®ä¸ºç›®æ ‡çš„è¶…çº§ç›—çªƒçŠ¯ã€‚
    
    è€Œä»–æœ€ä¸ºçªå‡ºçš„åœ°æ–¹ï¼Œå°±æ˜¯ä»–æ¯æ¬¡éƒ½èƒ½é€ƒè„±ä¸­æ‘è­¦éƒ¨çš„é‡é‡å›´å µï¼Œè€Œè¿™ä¹Ÿå¾ˆå¤§ç¨‹åº¦ä¸Šæ˜¯å¤šäºäº†ä»–éšèº«æºå¸¦çš„ä¾¿äºæ“ä½œçš„æ»‘ç¿”ç¿¼ã€‚
    
    æœ‰ä¸€å¤©ï¼Œæ€ªç›—åŸºå¾·åƒå¾€å¸¸ä¸€æ ·å·èµ°äº†ä¸€é¢—çè´µçš„é’»çŸ³ï¼Œä¸æ–™å´è¢«æŸ¯å—å°æœ‹å‹è¯†ç ´äº†ä¼ªè£…ï¼Œè€Œä»–çš„æ»‘ç¿”ç¿¼çš„åŠ¨åŠ›è£…ç½®ä¹Ÿè¢«æŸ¯å—è¸¢å‡ºçš„è¶³çƒç ´åäº†ã€‚
    
    ä¸å¾—å·²ï¼Œæ€ªç›—åŸºå¾·åªèƒ½æ“ä½œå—æŸçš„æ»‘ç¿”ç¿¼é€ƒè„±ã€‚
    
    å‡è®¾åŸå¸‚ä¸­ä¸€å…±æœ‰ $N$ å¹¢å»ºç­‘æ’æˆä¸€æ¡çº¿ï¼Œæ¯å¹¢å»ºç­‘çš„é«˜åº¦å„ä¸ç›¸åŒã€‚
    
    åˆå§‹æ—¶ï¼Œæ€ªç›—åŸºå¾·å¯ä»¥åœ¨ä»»ä½•ä¸€å¹¢å»ºç­‘çš„é¡¶ç«¯ã€‚
    
    ä»–å¯ä»¥é€‰æ‹©ä¸€ä¸ªæ–¹å‘é€ƒè·‘ï¼Œä½†æ˜¯ä¸èƒ½ä¸­é€”æ”¹å˜æ–¹å‘ï¼ˆå› ä¸ºä¸­æ£®è­¦éƒ¨ä¼šåœ¨åé¢è¿½å‡»ï¼‰ã€‚
    
    å› ä¸ºæ»‘ç¿”ç¿¼åŠ¨åŠ›è£…ç½®å—æŸï¼Œä»–åªèƒ½å¾€ä¸‹æ»‘è¡Œï¼ˆå³ï¼šåªèƒ½ä»è¾ƒé«˜çš„å»ºç­‘æ»‘ç¿”åˆ°è¾ƒä½çš„å»ºç­‘ï¼‰ã€‚
    
    ä»–å¸Œæœ›å°½å¯èƒ½å¤šåœ°ç»è¿‡ä¸åŒå»ºç­‘çš„é¡¶éƒ¨ï¼Œè¿™æ ·å¯ä»¥å‡ç¼“ä¸‹é™æ—¶çš„å†²å‡»åŠ›ï¼Œå‡å°‘å—ä¼¤çš„å¯èƒ½æ€§ã€‚
    
    è¯·é—®ï¼Œä»–æœ€å¤šå¯ä»¥ç»è¿‡å¤šå°‘å¹¢ä¸åŒå»ºç­‘çš„é¡¶éƒ¨(åŒ…å«åˆå§‹æ—¶çš„å»ºç­‘)ï¼Ÿ
    
    ### è¾“å…¥æ ¼å¼
    
    è¾“å…¥æ•°æ®ç¬¬ä¸€è¡Œæ˜¯ä¸€ä¸ªæ•´æ•°Kï¼Œä»£è¡¨æœ‰Kç»„æµ‹è¯•æ•°æ®ã€‚
    
    æ¯ç»„æµ‹è¯•æ•°æ®åŒ…å«ä¸¤è¡Œï¼šç¬¬ä¸€è¡Œæ˜¯ä¸€ä¸ªæ•´æ•°Nï¼Œä»£è¡¨æœ‰Nå¹¢å»ºç­‘ã€‚ç¬¬äºŒè¡ŒåŒ…å«Nä¸ªä¸åŒçš„æ•´æ•°ï¼Œæ¯ä¸€ä¸ªå¯¹åº”ä¸€å¹¢å»ºç­‘çš„é«˜åº¦hï¼ŒæŒ‰ç…§å»ºç­‘çš„æ’åˆ—é¡ºåºç»™å‡ºã€‚
    
    ### è¾“å‡ºæ ¼å¼
    
    å¯¹äºæ¯ä¸€ç»„æµ‹è¯•æ•°æ®ï¼Œè¾“å‡ºä¸€è¡Œï¼ŒåŒ…å«ä¸€ä¸ªæ•´æ•°ï¼Œä»£è¡¨æ€ªç›—åŸºå¾·æœ€å¤šå¯ä»¥ç»è¿‡çš„å»ºç­‘æ•°é‡ã€‚
    
    ### æ•°æ®èŒƒå›´
    
    $1 \\le K \\le 100$,
    $1 \\le N \\le 100$,
    $0 < h < 10000$
    
    ### è¾“å…¥æ ·ä¾‹ï¼š
    
    ```
    3
    8
    300 207 155 299 298 170 158 65
    8
    65 158 170 298 299 155 207 300
    10
    2 1 3 4 5 6 7 8 9 10
    ```
    
    ### è¾“å‡ºæ ·ä¾‹ï¼š
    
    ```
    6
    6
    9
    ```
    
- è§£ç­”
    
    ```cpp
    #include<iostream>
    using namespace std;
    
    const int N = 110;
    
    int f[N];
    
    int a[N];
    
    int main(){
        int T;
        cin >> T;
        while(T --){
            int n;
            cin >> n;
            for(int i = 0; i < n; i ++) cin >> a[i];
            
            int res = 0;
            for(int i = 0; i < n; i ++){
                f[i] = 1;
                for(int j = 0; j < i; j ++)
                    if(a[i] < a[j])
                        f[i] = max(f[i], f[j] + 1);
                res = max(res, f[i]);
            }
            
            for(int i = n; i >= 0; i --){
                f[i] = 1;
                for(int j = n - 1; j > i; j --)
                    if(a[i] < a[j])
                        f[i] = max(f[i], f[j] + 1);
                res = max(res, f[i]);
            }
            
            cout << res << endl;
        }
        
        return 0;
    }
    ```
    

## ****[1014. ç™»å±±](https://www.acwing.com/activity/content/problem/content/1260/)****

- é¢˜ç›®
    
    äº”ä¸€åˆ°äº†ï¼ŒACMé˜Ÿç»„ç»‡å¤§å®¶å»ç™»å±±è§‚å…‰ï¼Œé˜Ÿå‘˜ä»¬å‘ç°å±±ä¸Šä¸€å…±æœ‰ $N$ ä¸ªæ™¯ç‚¹ï¼Œå¹¶ä¸”å†³å®šæŒ‰ç…§é¡ºåºæ¥æµè§ˆè¿™äº›æ™¯ç‚¹ï¼Œå³æ¯æ¬¡æ‰€æµè§ˆæ™¯ç‚¹çš„ç¼–å·éƒ½è¦å¤§äºå‰ä¸€ä¸ªæµè§ˆæ™¯ç‚¹çš„ç¼–å·ã€‚
    
    åŒæ—¶é˜Ÿå‘˜ä»¬è¿˜æœ‰å¦ä¸€ä¸ªç™»å±±ä¹ æƒ¯ï¼Œå°±æ˜¯ä¸è¿ç»­æµè§ˆæµ·æ‹”ç›¸åŒçš„ä¸¤ä¸ªæ™¯ç‚¹ï¼Œå¹¶ä¸”ä¸€æ—¦å¼€å§‹ä¸‹å±±ï¼Œå°±ä¸å†å‘ä¸Šèµ°äº†ã€‚
    
    é˜Ÿå‘˜ä»¬å¸Œæœ›åœ¨æ»¡è¶³ä¸Šé¢æ¡ä»¶çš„åŒæ—¶ï¼Œå°½å¯èƒ½å¤šçš„æµè§ˆæ™¯ç‚¹ï¼Œä½ èƒ½å¸®ä»–ä»¬æ‰¾å‡ºæœ€å¤šå¯èƒ½æµè§ˆçš„æ™¯ç‚¹æ•°ä¹ˆï¼Ÿ
    
    ### è¾“å…¥æ ¼å¼
    
    ç¬¬ä¸€è¡ŒåŒ…å«æ•´æ•°Nï¼Œè¡¨ç¤ºæ™¯ç‚¹æ•°é‡ã€‚
    
    ç¬¬äºŒè¡ŒåŒ…å«Nä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºæ¯ä¸ªæ™¯ç‚¹çš„æµ·æ‹”ã€‚
    
    ### è¾“å‡ºæ ¼å¼
    
    è¾“å‡ºä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºæœ€å¤šèƒ½æµè§ˆçš„æ™¯ç‚¹æ•°ã€‚
    
    ### æ•°æ®èŒƒå›´
    
    $2 \\le N \\le 1000$
    
    ### è¾“å…¥æ ·ä¾‹ï¼š
    
    ```
    8
    186 186 150 200 160 130 197 220
    ```
    
    ### è¾“å‡ºæ ·ä¾‹ï¼š
    
    ```
    4
    ```
    
- è§£ç­”
    
    ```cpp
    #include<iostream>
    
    using namespace std;
    
    const int N = 1010;
    
    int a[N], f[N], g[N]; //åˆ†åˆ«ä¿å­˜æœ€é•¿ä¸Šå‡å’Œä¸‹é™çš„å­åºåˆ—é•¿åº¦
    
    int main(){
        
        int n;
        cin >> n;
        for(int i = 1; i <= n; i ++) cin >> a[i];
        
        for(int i = 1; i <= n; i ++){
            f[i] = 1;
            for(int j = 1; j < i; j ++)
                if(a[i] > a[j])
                    f[i] = max(f[i], f[j] + 1);
        }
        
        for(int i = n; i ; i --){
            g[i] = 1;
            for(int j = n; j > i; j --)
                if(a[i] > a[j])
                    g[i] = max(g[i], g[j] + 1);
        }
        
        int res = 0;
        
        for(int i = 1; i <= n; i ++){
            res = max(res, f[i] + g[i] - 1); //å…¶æœ¬èº«è¢«é‡å¤é€‰æ‹©äº†ä¸€æ¬¡
        }
        
        cout << res << endl;
        
        return 0;
    }
    ```
    

## ****[1012. å‹å¥½åŸå¸‚](https://www.acwing.com/problem/content/1014/)****

- é¢˜ç›®
    
    Palmiaå›½æœ‰ä¸€æ¡æ¨ªè´¯ä¸œè¥¿çš„å¤§æ²³ï¼Œæ²³æœ‰ç¬”ç›´çš„å—åŒ—ä¸¤å²¸ï¼Œå²¸ä¸Šå„æœ‰ä½ç½®å„ä¸ç›¸åŒçš„Nä¸ªåŸå¸‚ã€‚
    
    åŒ—å²¸çš„æ¯ä¸ªåŸå¸‚æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªå‹å¥½åŸå¸‚åœ¨å—å²¸ï¼Œè€Œä¸”ä¸åŒåŸå¸‚çš„å‹å¥½åŸå¸‚ä¸ç›¸åŒã€‚
    
    æ¯å¯¹å‹å¥½åŸå¸‚éƒ½å‘æ”¿åºœç”³è¯·åœ¨æ²³ä¸Šå¼€è¾Ÿä¸€æ¡ç›´çº¿èˆªé“è¿æ¥ä¸¤ä¸ªåŸå¸‚ï¼Œä½†æ˜¯ç”±äºæ²³ä¸Šé›¾å¤ªå¤§ï¼Œæ”¿åºœå†³å®šé¿å…ä»»æ„ä¸¤æ¡èˆªé“äº¤å‰ï¼Œä»¥é¿å…äº‹æ•…ã€‚
    
    ç¼–ç¨‹å¸®åŠ©æ”¿åºœåšå‡ºä¸€äº›æ‰¹å‡†å’Œæ‹’ç»ç”³è¯·çš„å†³å®šï¼Œä½¿å¾—åœ¨ä¿è¯ä»»æ„ä¸¤æ¡èˆªçº¿ä¸ç›¸äº¤çš„æƒ…å†µä¸‹ï¼Œè¢«æ‰¹å‡†çš„ç”³è¯·å°½é‡å¤šã€‚
    
    ### è¾“å…¥æ ¼å¼
    
    ç¬¬1è¡Œï¼Œä¸€ä¸ªæ•´æ•°Nï¼Œè¡¨ç¤ºåŸå¸‚æ•°ã€‚
    
    ç¬¬2è¡Œåˆ°ç¬¬n+1è¡Œï¼Œæ¯è¡Œä¸¤ä¸ªæ•´æ•°ï¼Œä¸­é—´ç”¨1ä¸ªç©ºæ ¼éš”å¼€ï¼Œåˆ†åˆ«è¡¨ç¤ºå—å²¸å’ŒåŒ—å²¸çš„ä¸€å¯¹å‹å¥½åŸå¸‚çš„åæ ‡ã€‚
    
    ### è¾“å‡ºæ ¼å¼
    
    ä»…ä¸€è¡Œï¼Œè¾“å‡ºä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºæ”¿åºœæ‰€èƒ½æ‰¹å‡†çš„æœ€å¤šç”³è¯·æ•°ã€‚
    
    ### æ•°æ®èŒƒå›´
    
    $1 \\le N \\le 5000$,
    $0 \\le x\_i \\le 10000$
    
    ### è¾“å…¥æ ·ä¾‹ï¼š
    
    ```
    7
    22 4
    2 6
    10 3
    15 12
    9 8
    17 17
    4 2
    
    ```
    
    ### è¾“å‡ºæ ·ä¾‹ï¼š
    
    ```
    4
    
    ```
    
- è§£ç­”
    
    ```cpp
    #include<iostream>
    #include<algorithm>
    using namespace std;
    
    const int N = 100010;
    
    typedef pair<int, int> PII;
    
    PII a[N];
    
    int f[N];
    
    int main(){
        
        int n;
        cin >> n;
        for(int i = 0; i < n; i ++) cin >> a[i].first >> a[i].second;
        
        sort(a, a + n);
        
        int res = 0;
        
        for(int i = 0; i < n; i ++){
            f[i] = 1;
            for(int j = 0; j < i; j ++)
                if(a[i].second > a[j].second)
                    f[i] = max(f[i], f[j] + 1);
                    
            res = max(res, f[i]);
        }
        
        cout << res << endl;
        
    }
    ```
    

## ****[1016. æœ€å¤§ä¸Šå‡å­åºåˆ—å’Œ](https://www.acwing.com/problem/content/1018/)****

- é¢˜ç›®
    
    ç»™å®šä¸€ä¸ªé•¿åº¦ä¸º $n$ çš„æ•´æ•°åºåˆ— $a\_1,a\_2,â€¦,a\_n$ã€‚

    è¯·ä½ é€‰å‡ºä¸€ä¸ªè¯¥åºåˆ—çš„ä¸¥æ ¼ä¸Šå‡å­åºåˆ—ï¼Œè¦æ±‚æ‰€é€‰å­åºåˆ—çš„å„å…ƒç´ ä¹‹å’Œå°½å¯èƒ½å¤§ã€‚

    è¯·é—®è¿™ä¸ªæœ€å¤§å€¼æ˜¯å¤šå°‘ï¼Ÿ   
 
    ä½ çš„ä»»åŠ¡ï¼Œå°±æ˜¯å¯¹äºç»™å®šçš„åºåˆ—ï¼Œæ±‚å‡ºæœ€å¤§ä¸Šå‡å­åºåˆ—å’Œã€‚
    
    æ³¨æ„ï¼Œæœ€é•¿çš„ä¸Šå‡å­åºåˆ—çš„å’Œä¸ä¸€å®šæ˜¯æœ€å¤§çš„ï¼Œæ¯”å¦‚åºåˆ—(100,1,2,3)çš„æœ€å¤§ä¸Šå‡å­åºåˆ—å’Œä¸º100ï¼Œè€Œæœ€é•¿ä¸Šå‡å­åºåˆ—ä¸º(1,2,3)ã€‚
    
    ### è¾“å…¥æ ¼å¼
    
    è¾“å…¥çš„ç¬¬ä¸€è¡Œæ˜¯åºåˆ—çš„é•¿åº¦Nã€‚
    
    ç¬¬äºŒè¡Œç»™å‡ºåºåˆ—ä¸­çš„Nä¸ªæ•´æ•°ï¼Œè¿™äº›æ•´æ•°çš„å–å€¼èŒƒå›´éƒ½åœ¨0åˆ°10000(å¯èƒ½é‡å¤)ã€‚
    
    ### è¾“å‡ºæ ¼å¼
    
    è¾“å‡ºä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºæœ€å¤§ä¸Šå‡å­åºåˆ—å’Œã€‚
    
    ### æ•°æ®èŒƒå›´
    
    $1 \\le N \\le 1000$
    
    ### è¾“å…¥æ ·ä¾‹ï¼š
    
    ```
    7
    1 7 3 5 9 4 8
    ```
    
    ### è¾“å‡ºæ ·ä¾‹ï¼š
    
    ```
    18
    ```
    
- è§£ç­”
    
    ```cpp
    #include<iostream>
    using namespace std;
    const int N = 1010;
    int f[N], a[N];
    int main(){
        int n;
        cin >> n;
        for(int i = 0; i < n; i ++) cin >> a[i];
        
        int res = 0;
        for(int i = 0; i < n; i ++) {
            f[i] = a[i];
            for(int j = 0; j < i; j ++)
                if(a[i] > a[j])
                    f[i] = max(f[i], f[j] + a[i]);
                    
            res = max(res, f[i]);
        }
        cout << res << endl;
    		return 0;
    }
    ```
    

---

## ****[1010. æ‹¦æˆªå¯¼å¼¹](https://www.acwing.com/activity/content/problem/content/1264/)****

- é¢˜ç›®
    
    æŸå›½ä¸ºäº†é˜²å¾¡æ•Œå›½çš„å¯¼å¼¹è¢­å‡»ï¼Œå‘å±•å‡ºä¸€ç§å¯¼å¼¹æ‹¦æˆªç³»ç»Ÿã€‚
    
    ä½†æ˜¯è¿™ç§å¯¼å¼¹æ‹¦æˆªç³»ç»Ÿæœ‰ä¸€ä¸ªç¼ºé™·ï¼šè™½ç„¶å®ƒçš„ç¬¬ä¸€å‘ç‚®å¼¹èƒ½å¤Ÿåˆ°è¾¾ä»»æ„çš„é«˜åº¦ï¼Œä½†æ˜¯ä»¥åæ¯ä¸€å‘ç‚®å¼¹éƒ½ä¸èƒ½é«˜äºå‰ä¸€å‘çš„é«˜åº¦ã€‚
    
    æŸå¤©ï¼Œé›·è¾¾æ•æ‰åˆ°æ•Œå›½çš„å¯¼å¼¹æ¥è¢­ã€‚
    
    ç”±äºè¯¥ç³»ç»Ÿè¿˜åœ¨è¯•ç”¨é˜¶æ®µï¼Œæ‰€ä»¥åªæœ‰ä¸€å¥—ç³»ç»Ÿï¼Œå› æ­¤æœ‰å¯èƒ½ä¸èƒ½æ‹¦æˆªæ‰€æœ‰çš„å¯¼å¼¹ã€‚
    
    è¾“å…¥å¯¼å¼¹ä¾æ¬¡é£æ¥çš„é«˜åº¦ï¼ˆé›·è¾¾ç»™å‡ºçš„é«˜åº¦æ•°æ®æ˜¯ä¸å¤§äº30000çš„æ­£æ•´æ•°ï¼Œå¯¼å¼¹æ•°ä¸è¶…è¿‡1000ï¼‰ï¼Œè®¡ç®—è¿™å¥—ç³»ç»Ÿæœ€å¤šèƒ½æ‹¦æˆªå¤šå°‘å¯¼å¼¹ï¼Œå¦‚æœè¦æ‹¦æˆªæ‰€æœ‰å¯¼å¼¹æœ€å°‘è¦é…å¤‡å¤šå°‘å¥—è¿™ç§å¯¼å¼¹æ‹¦æˆªç³»ç»Ÿã€‚
    
    ### è¾“å…¥æ ¼å¼
    
    å…±ä¸€è¡Œï¼Œè¾“å…¥å¯¼å¼¹ä¾æ¬¡é£æ¥çš„é«˜åº¦ã€‚
    
    ### è¾“å‡ºæ ¼å¼
    
    ç¬¬ä¸€è¡ŒåŒ…å«ä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºæœ€å¤šèƒ½æ‹¦æˆªçš„å¯¼å¼¹æ•°ã€‚
    
    ç¬¬äºŒè¡ŒåŒ…å«ä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºè¦æ‹¦æˆªæ‰€æœ‰å¯¼å¼¹æœ€å°‘è¦é…å¤‡çš„ç³»ç»Ÿæ•°ã€‚
    
    ### æ•°æ®èŒƒå›´
    
    é›·è¾¾ç»™å‡ºçš„é«˜åº¦æ•°æ®æ˜¯ä¸å¤§äº $30000$ çš„æ­£æ•´æ•°ï¼Œå¯¼å¼¹æ•°ä¸è¶…è¿‡ $1000$ã€‚
    
    ### è¾“å…¥æ ·ä¾‹ï¼š
    
    ```
    389 207 155 300 299 170 158 65
    ```
    
    ### è¾“å‡ºæ ·ä¾‹ï¼š
    
    ```
    6
    2
    ```
    
- è§£ç­”
    
    è´ªå¿ƒçš„æµç¨‹ï¼š
    
    ä»å‰å¾€åæ‰«ææ¯ä¸ªæ•°ï¼Œå¯¹äºæ¯ä¸ªæ•°
    
    æƒ…å†µ1ï¼šå¦‚æœç°æœ‰çš„å­åºåˆ—çš„ç»“å°¾éƒ½å°äºå½“å‰æ•°ã€‚åˆ™åˆ›å»ºæ–°å­æ•°åˆ—ï¼›
    
    æƒ…å†µ2ï¼šå°†å½“å‰çš„æ•°æ”¾åˆ°ç»“å°¾å¤§äºç­‰äºå®ƒçš„æœ€å°çš„å­åºåˆ—åé¢ï¼›
    
    å¦‚ä½•è¯æ˜ä¸¤ä¸ªæ•°ç›¸ç­‰ï¼ŸAâ‰¥B, Aâ‰¤B
    
    Aè¡¨ç¤ºè´ªå¿ƒç®—æ³•å¾—åˆ°çš„åºåˆ—çš„ä¸ªæ•°ï¼ŒBè¡¨ç¤ºæœ€ä¼˜è§£
    
    Bâ‰¤A
    
    Aâ‰¤Bï¼Œè°ƒæ•´æ³•
    
    å‡è®¾æœ€ä¼˜è§£å¯¹åº”çš„æ–¹æ¡ˆå’Œå½“å‰çš„æ–¹æ¡ˆä¸åŒã€‚
    
    æ‰¾åˆ°ç¬¬ä¸€ä¸ªä¸åŒçš„æ•°


# èƒŒåŒ…é—®é¢˜

## 01èƒŒåŒ…é—®é¢˜ï¼šåªèƒ½ç”¨0æˆ–è€…1æ¬¡

æœ‰ $N$ ä»¶ç‰©å“å’Œä¸€ä¸ªå®¹é‡ä¸º $V$ çš„èƒŒåŒ…ï¼Œæ¯ä»¶ç‰©å“æœ‰å„è‡ªçš„ä»·å€¼ä¸”åªèƒ½è¢«é€‰æ‹©ä¸€æ¬¡ï¼Œè¦æ±‚åœ¨æœ‰é™çš„èƒŒåŒ…å®¹é‡ä¸‹ï¼Œè£…å…¥çš„ç‰©å“æ€»ä»·å€¼æœ€å¤§ã€‚
    
```cpp
for(int i = 1; i <= n; i++) 
        for(int j = 1; j <= m; j++)
        {
            //  å½“å‰èƒŒåŒ…å®¹é‡è£…ä¸è¿›ç¬¬iä¸ªç‰©å“ï¼Œåˆ™ä»·å€¼ç­‰äºå‰i-1ä¸ªç‰©å“
            if(j < v[i]) 
                f[i][j] = f[i - 1][j];
            // èƒ½è£…ï¼Œéœ€è¿›è¡Œå†³ç­–æ˜¯å¦é€‰æ‹©ç¬¬iä¸ªç‰©å“
            else    
                f[i][j] = max(f[i - 1][j], f[i - 1][j - v[i]] + w[i]);
        }  
```

#### å°†æ•°ç»„ä¼˜åŒ–åˆ°ä¸€ç»´ï¼Œåœ¨ä¸€ç»´çš„çŠ¶å†µä¸‹ä½“ç§¯è¦[ä»å¤§åˆ°å°æšä¸¾](https://www.acwing.com/solution/content/1374/)

å°†f[i][j]ä¼˜åŒ–åˆ°f[j]ï¼Œè¿‡ç¨‹ä¸­åªéœ€è¦åšä¸€ä¸ªç­‰ä»·å˜å½¢

ä¸€ç»´æ—¶ï¼Œjçš„æšä¸¾æ˜¯ä»m(æ€»ä½“ç§¯)åˆ°v[i]ï¼Œå› ä¸ºä½“ç§¯å¤§çš„ç”±ä½“ç§¯å°çš„æ›´æ–°ï¼Œæˆ‘ä»¬è¦ç¡®ä¿ç¬¬içš„çŠ¶æ€æ˜¯ç”±i-1çš„çŠ¶æ€æ›´æ–°è€Œæ¥ã€‚

    
```cpp
for(int i = 1; i <= n; i++)
{
    for(int j = m; j >= v[i]; j--)  
        f[j] = max(f[j], f[j - v[i]] + w[i]);
}
```
    
## å®Œå…¨èƒŒåŒ…é—®é¢˜ï¼šæ¯ç§ç‰©å“å¯ä»¥ç”¨æ— é™æ¬¡ï¼ˆæ±‚å‰ç¼€çš„æœ€å¤§å€¼ï¼‰

æœ‰ $N$ ä»¶ç‰©å“å’Œä¸€ä¸ªå®¹é‡ä¸º $V$ çš„èƒŒåŒ…ï¼Œæ¯ç§ç‰©å“éƒ½æœ‰æ— é™ä»¶å¯ç”¨ã€‚è¦æ±‚åœ¨æœ‰é™çš„èƒŒåŒ…å®¹é‡ä¸‹ï¼Œè£…å…¥çš„ç‰©å“æ€»ä»·å€¼æœ€å¤§ã€‚
    
#### æœ€æœ´ç´ çš„åšæ³•
    
```cpp
for(int i = 1; i<=n; i ++)
    for(int j = 0; j<=m; j ++)
    {
        for(int k = 0; k * v[i] <= j; k ++)
            f[i][j] = max(f[i][j], f[i - 1][j - k * v[i]] + k * w[i]);
    }
```


#### ä¼˜åŒ–çš„æ€è·¯
    

```cpp
f[i , j ] = max( f[i-1,j] , f[i-1,j-v]+w ,  f[i-1,j-2*v]+2*w , f[i-1,j-3*v]+3*w , .....)
f[i , j-v]= max(            f[i-1,j-v]   ,  f[i-1,j-2*v] + w , f[i-1,j-3*v]+2*w , .....)
// ç”±ä¸Šä¸¤å¼ï¼Œå¯å¾—å‡ºå¦‚ä¸‹é€’æ¨å…³ç³»ï¼š 
                f[i][j] = max(f[i, j - v] + w, f[i - 1][j])
```
    
```cpp
// æœ‰äº†ä¸Šé¢çš„å…³ç³»ï¼Œé‚£ä¹ˆå…¶å®kå¾ªç¯å¯ä»¥ä¸è¦äº†ï¼Œæ ¸å¿ƒä»£ç ä¼˜åŒ–æˆè¿™æ ·ï¼š
for(int i = 1 ; i <=n ;i++)
	for(int j = 0 ; j <=m ;j++)
 	{
 	    f[i][j] = f[i - 1][j];
    	if(j - v[i] >= 0)
    	    f[i][j] = max(f[i][j], f[i][j - v[i]] + w[i]);
    }
    
for(int i = 1; i <= n; i ++)
    for(int j = v[i]; j <= m; j ++)//æ³¨æ„äº†ï¼Œè¿™é‡Œçš„jæ˜¯ä»å°åˆ°å¤§æšä¸¾ï¼Œå’Œ01èƒŒåŒ…ä¸ä¸€æ ·
    {
            f[j] = max(f[j], f[j - v[i]] + w[i]);
    }
```
    
## å¤šé‡èƒŒåŒ…é—®é¢˜ï¼šæ¯ç§ç‰©å“æœ‰æ•°é‡é™åˆ¶ï¼ˆæ±‚æ»‘åŠ¨çª—å£å†…çš„æœ€å¤§å€¼ï¼‰ï¼ˆå•è°ƒé˜Ÿåˆ—ä¼˜åŒ–ï¼‰

æœ‰ $N$ ç§ç‰©å“å’Œä¸€ä¸ªå®¹é‡æ˜¯ $V$ çš„èƒŒåŒ…ã€‚

ç¬¬ $i$ ç§ç‰©å“æœ€å¤šæœ‰ $s\_i$ ä»¶ï¼Œæ¯ä»¶ä½“ç§¯æ˜¯ $v\_i$ï¼Œä»·å€¼æ˜¯ $w\_i$ã€‚

æ±‚è§£å°†å“ªäº›ç‰©å“è£…å…¥èƒŒåŒ…ï¼Œå¯ä½¿ç‰©å“ä½“ç§¯æ€»å’Œä¸è¶…è¿‡èƒŒåŒ…å®¹é‡ï¼Œä¸”ä»·å€¼æ€»å’Œæœ€å¤§ã€‚è¾“å‡ºæœ€å¤§ä»·å€¼ã€‚

### æŠ€å·§1

$s\_i$ == 1 æ—¶ï¼Œå¯çœ‹ä½œæ˜¯01èƒŒåŒ…ï¼›$s\_i$ > 1 æ—¶ï¼Œå¯æ‹†è§£æˆ01èƒŒåŒ…ã€‚

æ‰€ä»¥å¯ä»¥æŠŠå¤šé‡èƒŒåŒ…æ‹†æˆ01èƒŒåŒ…ï¼ŒğŸ‘‡è§ä»£ç ã€‚

``` cpp
#include <iostream>
#include <cstring>
#include <algorithm>
using namespace std;
const int N = 10010;
int v[N], w[N], f[N], _v, _w, s, n, m, t;
int main() {
    cin >> n >> m;
    for(int i = 1; i <= n; i ++) {
        cin >> _v >> _w >> s;
        while(s --) {
            v[++ t] = _v;
            w[t] = _w;
        }
    }
    for(int i = 1; i <= t; i ++)
        for(int j = m; j >= v[i]; j --)
            f[j] = max(f[j], f[j - v[i]] + w[i]);
            
    cout << f[m] << endl;
}
```

### æŠ€å·§2

ä¸Šæ®µä»£ç å¯ä»¥è§£å†³ 

$0 \\lt Nï¼ŒV \\le 100$
$0 \\lt v\_i, w\_i, s\_i \\le 200$ æ—¶çš„é—®é¢˜

ä½†æ˜¯åœ¨

$0 \\lt N \\le 1000$  
$0 \\lt V \\le 2000$  
$0 \\lt v\_i, w\_i, s\_i \\le 2000$  çš„èŒƒå›´ä¸‹ä¼šè¶…æ—¶

æˆ‘ä»¬å¯ä»¥æ”¹è¿›ç®—æ³•ï¼Œå°†å¤šé‡èƒŒåŒ…æŒ‰äºŒè¿›åˆ¶ä½è¿›è¡Œæ‹†åˆ†ï¼ŒğŸ‘‡è§ä»£ç ã€‚

``` cpp
#include <iostream>
#include <cstring>
#include <algorithm>
using namespace std;
const int N = 20010, M = 2010;
int v[N], w[N], f[M], _v, _w, s, n, m, t;
int main() {
    cin >> n >> m;
    for(int i = 1; i <= n; i ++) {
        cin >> _v >> _w >> s;
        int k = 1;
        while(k <= s) {
            v[++ t] = k * _v;
            w[t] = k * _w;
            s -= k;
            k <<= 1;
        }
        if(s > 0) {
            v[++ t] = s * _v;
            w[t] = s * _w;
        }
    }
    for(int i = 1; i <= t; i ++)
        for(int j = m; j >= v[i]; j --)
            f[j] = max(f[j], f[j - v[i]] + w[i]);
            
    cout << f[m] << endl;
}
```


æ€»ç»“ï¼š

å½“ç©ºé—´ä¼˜åŒ–æˆä¸€ç»´åï¼Œåªæœ‰å®Œå…¨èƒŒåŒ…çš„ä½“ç§¯æ˜¯ä»å°åˆ°å¤§å¾ªç¯çš„

èƒŒåŒ…é—®é¢˜çš„å¾ªç¯æ–¹å¼ï¼šç‰©å“ â†’ ä½“ç§¯ â†’ å†³ç­–ï¼ˆé›†åˆä¸­ï¼‰


# çŠ¶æ€æœºæ¨¡å‹

## **1049. å¤§ç›—é˜¿ç¦**

- é¢˜ç›®
    
    é˜¿ç¦æ˜¯ä¸€åç»éªŒä¸°å¯Œçš„å¤§ç›—ã€‚è¶ç€æœˆé»‘é£é«˜ï¼Œé˜¿ç¦æ‰“ç®—ä»Šæ™šæ´—åŠ«ä¸€æ¡è¡—ä¸Šçš„åº—é“ºã€‚
    
    è¿™æ¡è¡—ä¸Šä¸€å…±æœ‰ $N$ å®¶åº—é“ºï¼Œæ¯å®¶åº—ä¸­éƒ½æœ‰ä¸€äº›ç°é‡‘ã€‚
    
    é˜¿ç¦äº‹å…ˆè°ƒæŸ¥å¾—çŸ¥ï¼Œåªæœ‰å½“ä»–åŒæ—¶æ´—åŠ«äº†ä¸¤å®¶ç›¸é‚»çš„åº—é“ºæ—¶ï¼Œè¡—ä¸Šçš„æŠ¥è­¦ç³»ç»Ÿæ‰ä¼šå¯åŠ¨ï¼Œç„¶åè­¦å¯Ÿå°±ä¼šèœ‚æ‹¥è€Œè‡³ã€‚
    
    ä½œä¸ºä¸€å‘è°¨æ…ä½œæ¡ˆçš„å¤§ç›—ï¼Œé˜¿ç¦ä¸æ„¿æ„å†’ç€è¢«è­¦å¯Ÿè¿½æ•çš„é£é™©è¡Œçªƒã€‚
    
    ä»–æƒ³çŸ¥é“ï¼Œåœ¨ä¸æƒŠåŠ¨è­¦å¯Ÿçš„æƒ…å†µä¸‹ï¼Œä»–ä»Šæ™šæœ€å¤šå¯ä»¥å¾—åˆ°å¤šå°‘ç°é‡‘ï¼Ÿ
    
    ### è¾“å…¥æ ¼å¼
    
    è¾“å…¥çš„ç¬¬ä¸€è¡Œæ˜¯ä¸€ä¸ªæ•´æ•° $T$ï¼Œè¡¨ç¤ºä¸€å…±æœ‰ $T$ ç»„æ•°æ®ã€‚
    
    æ¥ä¸‹æ¥çš„æ¯ç»„æ•°æ®ï¼Œç¬¬ä¸€è¡Œæ˜¯ä¸€ä¸ªæ•´æ•° $N$ ï¼Œè¡¨ç¤ºä¸€å…±æœ‰ $N$ å®¶åº—é“ºã€‚
    
    ç¬¬äºŒè¡Œæ˜¯ $N$ ä¸ªè¢«ç©ºæ ¼åˆ†å¼€çš„æ­£æ•´æ•°ï¼Œè¡¨ç¤ºæ¯ä¸€å®¶åº—é“ºä¸­çš„ç°é‡‘æ•°é‡ã€‚
    
    æ¯å®¶åº—é“ºä¸­çš„ç°é‡‘æ•°é‡å‡ä¸è¶…è¿‡1000ã€‚
    
    ### è¾“å‡ºæ ¼å¼
    
    å¯¹äºæ¯ç»„æ•°æ®ï¼Œè¾“å‡ºä¸€è¡Œã€‚
    
    è¯¥è¡ŒåŒ…å«ä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºé˜¿ç¦åœ¨ä¸æƒŠåŠ¨è­¦å¯Ÿçš„æƒ…å†µä¸‹å¯ä»¥å¾—åˆ°çš„ç°é‡‘æ•°é‡ã€‚
    
    ### æ•°æ®èŒƒå›´
    
    $1 \\le T \\le 50$,
    $1 \\le N \\le 10^5$
    
    ### è¾“å…¥æ ·ä¾‹ï¼š
    
    ```
    2
    3
    1 8 2
    4
    10 7 6 14
    ```
    
    ### è¾“å‡ºæ ·ä¾‹ï¼š
    
    ```
    8
    24
    ```
    
    ### æ ·ä¾‹è§£é‡Š
    
    å¯¹äºç¬¬ä¸€ç»„æ ·ä¾‹ï¼Œé˜¿ç¦é€‰æ‹©ç¬¬2å®¶åº—é“ºè¡Œçªƒï¼Œè·å¾—çš„ç°é‡‘æ•°é‡ä¸º8ã€‚
    
    å¯¹äºç¬¬äºŒç»„æ ·ä¾‹ï¼Œé˜¿ç¦é€‰æ‹©ç¬¬1å’Œ4å®¶åº—é“ºè¡Œçªƒï¼Œè·å¾—çš„ç°é‡‘æ•°é‡ä¸º10+14=24ã€‚
    
- è§£ç­”
    
    ```cpp
    #include <iostream>
    #include <algorithm>
    
    using namespace std;
    
    const int N = 100010;
    
    int n;
    int w[N], f[N][2];
    
    int main()
    {
        int T;
        scanf("%d", &T);
        while (T -- )
        {
            scanf("%d", &n);
            for (int i = 1; i <= n; i ++ ) scanf("%d", &w[i]);
    
            for (int i = 1; i <= n; i ++ )
            {
                f[i][0] = max(f[i - 1][0], f[i - 1][1]);
                f[i][1] = f[i - 1][0] + w[i];
            }
    
            printf("%d\n", max(f[n][0], f[n][1]));
        }
    
        return 0;
    }
    ```
    

## **1057. è‚¡ç¥¨ä¹°å– IV**

- é¢˜ç›®
    
    ç»™å®šä¸€ä¸ªé•¿åº¦ä¸º $N$ çš„æ•°ç»„ï¼Œæ•°ç»„ä¸­çš„ç¬¬ $i$ ä¸ªæ•°å­—è¡¨ç¤ºä¸€ä¸ªç»™å®šè‚¡ç¥¨åœ¨ç¬¬ $i$ å¤©çš„ä»·æ ¼ã€‚
    
    è®¾è®¡ä¸€ä¸ªç®—æ³•æ¥è®¡ç®—ä½ æ‰€èƒ½è·å–çš„æœ€å¤§åˆ©æ¶¦ï¼Œä½ æœ€å¤šå¯ä»¥å®Œæˆ $k$ ç¬”äº¤æ˜“ã€‚
    
    æ³¨æ„ï¼šä½ ä¸èƒ½åŒæ—¶å‚ä¸å¤šç¬”äº¤æ˜“ï¼ˆä½ å¿…é¡»åœ¨å†æ¬¡è´­ä¹°å‰å‡ºå”®æ‰ä¹‹å‰çš„è‚¡ç¥¨ï¼‰ã€‚ä¸€æ¬¡ä¹°å…¥å–å‡ºåˆä¸ºä¸€ç¬”äº¤æ˜“ã€‚
    
    ### è¾“å…¥æ ¼å¼
    
    ç¬¬ä¸€è¡ŒåŒ…å«æ•´æ•° $N$ å’Œ $k$ï¼Œè¡¨ç¤ºæ•°ç»„çš„é•¿åº¦ä»¥åŠä½ å¯ä»¥å®Œæˆçš„æœ€å¤§äº¤æ˜“ç¬”æ•°ã€‚
    
    ç¬¬äºŒè¡ŒåŒ…å« $N$ ä¸ªä¸è¶…è¿‡ $10000$ çš„æ­£æ•´æ•°ï¼Œè¡¨ç¤ºå®Œæ•´çš„æ•°ç»„ã€‚
    
    ### è¾“å‡ºæ ¼å¼
    
    è¾“å‡ºä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºæœ€å¤§åˆ©æ¶¦ã€‚
    
    ### æ•°æ®èŒƒå›´
    
    $1 \\le N \\le 10^5$,
    $1 \\le k \\le 100$
    
    ### è¾“å…¥æ ·ä¾‹1ï¼š
    
    ```
    3 2
    2 4 1
    ```
    
    ### è¾“å‡ºæ ·ä¾‹1ï¼š
    
    ```
    2
    ```
    
    ### è¾“å…¥æ ·ä¾‹2ï¼š
    
    ```
    6 2
    3 2 6 5 0 3
    ```
    
    ### è¾“å‡ºæ ·ä¾‹2ï¼š
    
    ```
    7
    ```
    
    ### æ ·ä¾‹è§£é‡Š
    
    æ ·ä¾‹1ï¼šåœ¨ç¬¬ 1 å¤© (è‚¡ç¥¨ä»·æ ¼ = 2) çš„æ—¶å€™ä¹°å…¥ï¼Œåœ¨ç¬¬ 2 å¤© (è‚¡ç¥¨ä»·æ ¼ = 4) çš„æ—¶å€™å–å‡ºï¼Œè¿™ç¬”äº¤æ˜“æ‰€èƒ½è·å¾—åˆ©æ¶¦ = 4-2 = 2 ã€‚
    
    æ ·ä¾‹2ï¼šåœ¨ç¬¬ 2 å¤© (è‚¡ç¥¨ä»·æ ¼ = 2) çš„æ—¶å€™ä¹°å…¥ï¼Œåœ¨ç¬¬ 3 å¤© (è‚¡ç¥¨ä»·æ ¼ = 6) çš„æ—¶å€™å–å‡º, è¿™ç¬”äº¤æ˜“æ‰€èƒ½è·å¾—åˆ©æ¶¦ = 6-2 = 4 ã€‚éšåï¼Œåœ¨ç¬¬ 5 å¤© (è‚¡ç¥¨ä»·æ ¼ = 0) çš„æ—¶å€™ä¹°å…¥ï¼Œåœ¨ç¬¬ 6 å¤© (è‚¡ç¥¨ä»·æ ¼ = 3) çš„æ—¶å€™å–å‡º, è¿™ç¬”äº¤æ˜“æ‰€èƒ½è·å¾—åˆ©æ¶¦ = 3-0 = 3 ã€‚å…±è®¡åˆ©æ¶¦ 4+3 = 7.
    
- è§£ç­”
    
    ```cpp
    #include<iostream>
    #include<cstring>
    const int N = 100010, M = 110;
    int f[N][M][2], w[N];
    int n, m;
    using namespace std;
    int main(){
        cin >> n >> m;
        for(int i = 1; i <= n; i ++) cin >> w[i];
        memset(f, -0x3f, sizeof f);
        for(int i = 0; i <= n; i ++) f[i][0][0] = 0;//æ˜¨å¤©æ²¡æœ‰äº¤æ˜“ï¼Œåˆå§‹åŒ–ä¸º0
        for(int i = 1; i <= n; i ++)
            for(int j = 1; j <= m; j ++){
    						//æˆ‘ä»¬å°†ä¹°å…¥ä¸€æ¬¡çœ‹åšäº¤æ˜“æ¬¡æ•°åŠ ä¸€
                f[i][j][0] = max(f[i - 1][j][0], f[i - 1][j][1] + w[i]);
    						//ç¬¬iå¤©çŠ¶æ€æ˜¯ç©ºä»“çŠ¶æ€(j=0)ï¼Œåˆ™ç¬¬iå¤©å¯èƒ½äº§ç”Ÿçš„è¡Œä¸ºæ˜¯å–å‡ºè¡Œä¸ºæˆ–ç©ºä»“è¡Œä¸º
                f[i][j][1] = max(f[i - 1][j][1], f[i - 1][j - 1][0] - w[i]);
    						//ç¬¬iå¤©çŠ¶æ€æ˜¯æŒä»“çŠ¶æ€(j=1)ï¼Œåˆ™ç¬¬iå¤©å¯èƒ½äº§ç”Ÿçš„è¡Œä¸ºæ˜¯ä¹°å…¥è¡Œä¸ºæˆ–æŒä»“è¡Œä¸º
            }
        int res = 0; // ä¸èƒ½äºæœ¬
        for(int i = 0; i <= m; i ++) res = max(res, f[n][i][0]);
        cout << res ;
        return 0;
    }
    ```
    

## ****1058. è‚¡ç¥¨ä¹°å– V****

- é¢˜ç›®
    
    ç»™å®šä¸€ä¸ªé•¿åº¦ä¸º $N$ çš„æ•°ç»„ï¼Œæ•°ç»„ä¸­çš„ç¬¬ $i$ ä¸ªæ•°å­—è¡¨ç¤ºä¸€ä¸ªç»™å®šè‚¡ç¥¨åœ¨ç¬¬ $i$ å¤©çš„ä»·æ ¼ã€‚
    
    è®¾è®¡ä¸€ä¸ªç®—æ³•è®¡ç®—å‡ºæœ€å¤§åˆ©æ¶¦ã€‚åœ¨æ»¡è¶³ä»¥ä¸‹çº¦æŸæ¡ä»¶ä¸‹ï¼Œä½ å¯ä»¥å°½å¯èƒ½åœ°å®Œæˆæ›´å¤šçš„äº¤æ˜“ï¼ˆå¤šæ¬¡ä¹°å–ä¸€æ”¯è‚¡ç¥¨ï¼‰:
    
    - ä½ ä¸èƒ½åŒæ—¶å‚ä¸å¤šç¬”äº¤æ˜“ï¼ˆä½ å¿…é¡»åœ¨å†æ¬¡è´­ä¹°å‰å‡ºå”®æ‰ä¹‹å‰çš„è‚¡ç¥¨ï¼‰ã€‚
    - å–å‡ºè‚¡ç¥¨åï¼Œä½ æ— æ³•åœ¨ç¬¬äºŒå¤©ä¹°å…¥è‚¡ç¥¨ (å³å†·å†»æœŸä¸º $1$ å¤©)ã€‚
    
    ### è¾“å…¥æ ¼å¼
    
    ç¬¬ä¸€è¡ŒåŒ…å«æ•´æ•° $N$ï¼Œè¡¨ç¤ºæ•°ç»„é•¿åº¦ã€‚
    
    ç¬¬äºŒè¡ŒåŒ…å« $N$ ä¸ªä¸è¶…è¿‡ $10000$ çš„æ­£æ•´æ•°ï¼Œè¡¨ç¤ºå®Œæ•´çš„æ•°ç»„ã€‚
    
    ### è¾“å‡ºæ ¼å¼
    
    è¾“å‡ºä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºæœ€å¤§åˆ©æ¶¦ã€‚
    
    ### æ•°æ®èŒƒå›´
    
    $1 \\le N \\le 10^5$
    
    ### è¾“å…¥æ ·ä¾‹ï¼š
    
    ```
    5
    1 2 3 0 2
    ```
    
    ### è¾“å‡ºæ ·ä¾‹ï¼š
    
    ```
    3
    ```
    
    ### æ ·ä¾‹è§£é‡Š
    
    å¯¹åº”çš„äº¤æ˜“çŠ¶æ€ä¸º: \[ä¹°å…¥, å–å‡º, å†·å†»æœŸ, ä¹°å…¥, å–å‡º\]ï¼Œç¬¬ä¸€ç¬”äº¤æ˜“å¯å¾—åˆ©æ¶¦ 2-1 = 1ï¼Œç¬¬äºŒç¬”äº¤æ˜“å¯å¾—åˆ©æ¶¦ 2-0 = 2ï¼Œå…±å¾—åˆ©æ¶¦ 1+2 = 3ã€‚
    
- è§£ç­”
    
    ![Untitled](img/status_machine.png)
    
    ```cpp
    #include<iostream>
    #include<cstring>
    using namespace std;
    const int N = 100010, INF = 0x3f3f3f3f;
    int f[N][3], w[N];
    int n;
    int main (){
        cin >> n;
        for(int i = 1; i <= n; i ++) cin >> w[i];
        f[0][0] = f[0][1] = -INF;
        f[0][2] = 0;
        for(int i = 1; i <= n; i ++){
            f[i][0] = max(f[i - 1][0], f[i - 1][2] - w[i]);
            f[i][1] = f[i - 1][0] + w[i];
            f[i][2] = max(f[i - 1][1], f[i - 1][2]);
        }
        cout << max(f[n][1], f[n][2]) << endl;
    		// å¦‚æœè‚¡ç¥¨çš„ä»·æ ¼æ˜¯å•è°ƒä¸‹é™çš„ï¼Œé‚£ä¹ˆæœ€å¥½çš„ç­–ç•¥æ˜¯ä¸€æ¬¡äº¤æ˜“ä¹Ÿä¸åš
    		// å–ä¸¤ä¸ªå‡ºå£çš„max
        return 0;
    }
    ```
    

## ****1052. è®¾è®¡å¯†ç ****

- é¢˜ç›®
- è§£ç­”
    
    ACè‡ªåŠ¨æœº=Trie+KMP

    ç­‰å¾…å¡«å……


# çŠ¶æ€å‹ç¼©DP

## 1.æ£‹ç›˜ï¼ˆåŸºäºè”é€šæ€§ï¼‰

## **1064. å°å›½ç‹**

- é¢˜ç›®
    
    åœ¨ $nÃ—n$ çš„æ£‹ç›˜ä¸Šæ”¾ $k$ ä¸ªå›½ç‹ï¼Œå›½ç‹å¯æ”»å‡»ç›¸é‚»çš„ 8 ä¸ªæ ¼å­ï¼Œæ±‚ä½¿å®ƒä»¬æ— æ³•äº’ç›¸æ”»å‡»çš„æ–¹æ¡ˆæ€»æ•°ã€‚
    
    ### è¾“å…¥æ ¼å¼
    
    å…±ä¸€è¡Œï¼ŒåŒ…å«ä¸¤ä¸ªæ•´æ•° $n$ å’Œ $k$ã€‚
    
    ### è¾“å‡ºæ ¼å¼
    
    å…±ä¸€è¡Œï¼Œè¡¨ç¤ºæ–¹æ¡ˆæ€»æ•°ï¼Œè‹¥ä¸èƒ½å¤Ÿæ”¾ç½®åˆ™è¾“å‡º 0 ã€‚
    
    ### æ•°æ®èŒƒå›´
    
    $1 \\le n \\le 10$,
    $0 \\le k \\le n^2$
    
    ### è¾“å…¥æ ·ä¾‹ï¼š
    
    ```
    3 2
    ```
    
    ### è¾“å‡ºæ ·ä¾‹ï¼š
    
    ```
    16
    ```
    
- è§£ç­”
    
    çŠ¶æ€è¡¨ç¤ºï¼šf[i, j, s] ä»£è¡¨åªæ‘†åœ¨å‰iè¡Œï¼Œå·²ç»æ‘†äº†jä¸ªå›½ç‹ï¼Œå¹¶ä¸”ç¬¬iè¡Œçš„çŠ¶æ€æ˜¯s(äºŒè¿›åˆ¶)çš„é›†åˆ
    
    å±æ€§ï¼šCount
    
    çŠ¶æ€è®¡ç®—ï¼šé›†åˆåˆ’åˆ†çš„è¿‡ç¨‹ğŸ‘‡
    
    ç¬¬i-1è¡Œä¸èƒ½æ”¾åœ¨ç›¸é‚»çš„ï¼Œä¸¤ä¸ªæ ¼å­ å¹¶ä¸” ç¬¬i-1è¡Œå’Œç¬¬iè¡Œä¹‹é—´ä¹Ÿä¸èƒ½äº’ç›¸æ”»å‡»åˆ°
    
    a, båˆ†åˆ«ä»£è¡¨ç¬¬i-1å’Œç¬¬iè¡Œçš„çŠ¶æ€çš„äºŒè¿›åˆ¶è¡¨ç¤º
    
    åˆ™åº”è¯¥æ»¡è¶³(a & b) == 0 å¹¶ä¸” (a | b) ä¸èƒ½æœ‰ç›¸é‚»çš„1
    
    å·²ç»æ‘†å®Œå‰iè¡Œï¼Œç¬¬iè¡Œçš„çŠ¶æ€ä¸ºaï¼Œç¬¬i-1çš„çŠ¶æ€ä¸ºbï¼Œå·²ç»æ‘†äº†jä¸ªå›½ç‹çš„æ‰€æœ‰æ–¹æ¡ˆ
    
    å·²ç»æ‘†å®Œå‰i-1è¡Œï¼Œç¬¬i-1è¡Œçš„çŠ¶æ€ä¸ºbï¼Œå·²ç»æ‘†äº†j-count(a)ä¸ªå›½ç‹çš„æ‰€æœ‰æ–¹æ¡ˆ
    
    DPé—®é¢˜çš„æ—¶é—´çš„å¤æ‚åº¦ï¼šçŠ¶æ€æ•°é‡*çŠ¶æ€è®¡ç®—çš„è®¡ç®—é‡
    
    çŠ¶æ€æ•°é‡ï¼šè¡Œæ•°
    
    ```cpp
    #include<iostream>
    #include<vector>
    
    using namespace std;
    
    typedef long long ll;
    
    const int N = 12, M = 1 << 10, K = 110;
    
    int n, m;
    ll f[N][K][M];
    int cnt[M];
    vector<int> state;
    vector<int> head[M];
    
    bool check(int state){  // æ£€æŸ¥æ­¤çŠ¶æ€æ˜¯å¦åˆæ³•ï¼ŒçŠ¶æ€ä¸­ä¸åº”è¯¥å‡ºç°ä¸¤ä¸ª1ç›¸é‚»çš„æƒ…å†µ
        for(int i = 0; i < n; i ++)
            if((state >> i & 1) && (state >> i + 1 & 1))
                return false;
        return true;
    }
    
    int count(int state){  // è®¡ç®—å½“å‰çš„çŠ¶æ€ä¸­ç”¨æ‰äº†å‡ ä¸ªå›½ç‹
        int res = 0;
        for(int i = 0; i < n; i ++) res += state >> i & 1;
        return res;
    }
    
    int main(){
        
        cin >> n >> m;
        
        for(int i = 0; i < 1 << n; i ++) // åˆå§‹åŒ–æ‰€æœ‰èƒ½æ»¡è¶³æ²¡æœ‰ä¸¤ä¸ª1ç›¸é‚»çš„çŠ¶æ€
            if(check(i)){
                state.push_back(i);
                cnt[i] = count(i);
            }
        
        for(int i = 0; i < state.size(); i ++) // åˆå§‹åŒ– å¦‚æœä¸¤ä¸ªçŠ¶æ€å¯ä»¥æˆä¸ºç›¸é‚»çš„ä¸¤è¡Œ åˆ™åŠ å…¥åˆ°headæ•°ç»„ä¸­
            for(int j = 0; j < state.size(); j ++){
                int a = state[i], b = state[j];
                if((a & b) == 0 && check(a | b))
                    head[i].push_back(j);
            }
            
        f[0][0][0] = 1;
        
        for(int i = 1; i <= n + 1; i ++) // æˆ‘ä»¬è¦æ±‚çš„æœ€ç»ˆçŠ¶æ€æ˜¯n+1çš„çŠ¶æ€ è¿™æ ·å¯ä»¥å‡å°‘ä¸€æ¬¡å¾ªç¯
            for(int j = 0; j <= m; j ++)
                for(int a = 0; a < state.size(); a ++)
                    for(int b : head[a]){
                        int c = cnt[state[a]];
                        if(c <= j) // å¦‚æœå½“å‰å›½ç‹çš„æ•°é‡æ²¡æœ‰è¶…è¿‡
                            f[i][j][a] += f[i - 1][j - c][b]; // ç”±bçš„çŠ¶æ€è½¬ç§»è¿‡æ¥
                    }
                    
        cout << f[n + 1][m][0] << endl;
        
        return 0;
    }
    ```
    

## **327. ç‰ç±³ç”°**

- é¢˜ç›®
    
    å†œå¤«çº¦ç¿°çš„åœŸåœ°ç”± $M \\times N$ ä¸ªå°æ–¹æ ¼ç»„æˆï¼Œç°åœ¨ä»–è¦åœ¨åœŸåœ°é‡Œç§æ¤ç‰ç±³ã€‚
    
    éå¸¸é—æ†¾ï¼Œéƒ¨åˆ†åœŸåœ°æ˜¯ä¸è‚²çš„ï¼Œæ— æ³•ç§æ¤ã€‚
    
    è€Œä¸”ï¼Œç›¸é‚»çš„åœŸåœ°ä¸èƒ½åŒæ—¶ç§æ¤ç‰ç±³ï¼Œä¹Ÿå°±æ˜¯è¯´ç§æ¤ç‰ç±³çš„æ‰€æœ‰æ–¹æ ¼ä¹‹é—´éƒ½ä¸ä¼šæœ‰å…¬å…±è¾¹ç¼˜ã€‚
    
    ç°åœ¨ç»™å®šåœŸåœ°çš„å¤§å°ï¼Œè¯·ä½ æ±‚å‡ºå…±æœ‰å¤šå°‘ç§ç§æ¤æ–¹æ³•ã€‚
    
    åœŸåœ°ä¸Šä»€ä¹ˆéƒ½ä¸ç§ä¹Ÿç®—ä¸€ç§æ–¹æ³•ã€‚
    
    ### è¾“å…¥æ ¼å¼
    
    ç¬¬ $1$ è¡ŒåŒ…å«ä¸¤ä¸ªæ•´æ•° $M$ å’Œ $N$ã€‚
    
    ç¬¬ $2..M+1$ è¡Œï¼šæ¯è¡ŒåŒ…å« $N$ ä¸ªæ•´æ•° $0$ æˆ– $1$ï¼Œç”¨æ¥æè¿°æ•´ä¸ªåœŸåœ°çš„çŠ¶å†µï¼Œ$1$ è¡¨ç¤ºè¯¥å—åœŸåœ°è‚¥æ²ƒï¼Œ$0$ è¡¨ç¤ºè¯¥å—åœŸåœ°ä¸è‚²ã€‚
    
    ### è¾“å‡ºæ ¼å¼
    
    è¾“å‡ºæ€»ç§æ¤æ–¹æ³•å¯¹ $10^8$ å–æ¨¡åçš„å€¼ã€‚
    
    ### æ•°æ®èŒƒå›´
    
    $1 \\le M,N \\le 12$
    
    ### è¾“å…¥æ ·ä¾‹ï¼š
    
    ```
    2 3
    1 1 1
    0 1 0
    ```
    
    ### è¾“å‡ºæ ·ä¾‹ï¼š
    
    ```
    9
    ```
    
- è§£ç­”
    
    ```cpp
    #include<iostream>
    #include<vector>
    using namespace std;
    const int N = 15, M = 1 << 12, MOD = 1e8;
    int f[N][M], g[N];
    int n, m;
    vector<int> state;
    vector<int> head[M];
    bool check(int state){
        for(int i = 0; i < m; i ++)
            if((state >> i & 1) && (state >> i + 1 & 1))
                return false;
        return true;
    }
    int main(){
        cin >> n >> m;
        for(int i = 1; i <= n; i ++)
            for(int j = 0; j < m ; j ++){
                int t;
                cin >> t;
                g[i] += !t << j;
            }
        for(int i = 0; i < 1 << m; i ++)
            if(check(i))
                state.push_back(i);
        for(int i = 0; i < state.size(); i ++)
            for(int j = 0; j < state.size(); j ++){
                int a = state[i], b = state[j];
                if((a & b) == 0)
                    head[i].push_back(j);
            }
        f[0][0] = 1;
        for(int i = 1; i <= n + 1; i ++)
            for(int a = 0; a < state.size(); a ++){
                if(g[i] & state[a]) continue; //å°†æ¤ç‰©ç§æ¤åœ¨ä¸è‚²çš„åœŸåœ°ä¸Šä¸ç¬¦åˆè¦æ±‚
                for(int b : head[a]){ //æ‰¾æ»¡è¶³æ¡ä»¶çš„ç¬¬i-1ä¸ªçŠ¶æ€b
                    f[i][a] = (f[i][a] + f[i - 1][b]) % MOD;
                }
            }
        cout << f[n + 1][0] << endl;
        return 0;
    }
    ```
    

## ****292. ç‚®å…µé˜µåœ°****

- é¢˜ç›®
    
    å¸ä»¤éƒ¨çš„å°†å†›ä»¬æ‰“ç®—åœ¨ $N \\times M$ çš„ç½‘æ ¼åœ°å›¾ä¸Šéƒ¨ç½²ä»–ä»¬çš„ç‚®å…µéƒ¨é˜Ÿã€‚
    
    ä¸€ä¸ª $N \\times M$ çš„åœ°å›¾ç”± $N$ è¡Œ $M$ åˆ—ç»„æˆï¼Œåœ°å›¾çš„æ¯ä¸€æ ¼å¯èƒ½æ˜¯å±±åœ°ï¼ˆç”¨ `H` è¡¨ç¤ºï¼‰ï¼Œä¹Ÿå¯èƒ½æ˜¯å¹³åŸï¼ˆç”¨ `P` è¡¨ç¤ºï¼‰ï¼Œå¦‚ä¸‹å›¾ã€‚
    
    åœ¨æ¯ä¸€æ ¼å¹³åŸåœ°å½¢ä¸Šæœ€å¤šå¯ä»¥å¸ƒç½®ä¸€æ”¯ç‚®å…µéƒ¨é˜Ÿï¼ˆå±±åœ°ä¸Šä¸èƒ½å¤Ÿéƒ¨ç½²ç‚®å…µéƒ¨é˜Ÿï¼‰ï¼›ä¸€æ”¯ç‚®å…µéƒ¨é˜Ÿåœ¨åœ°å›¾ä¸Šçš„æ”»å‡»èŒƒå›´å¦‚å›¾ä¸­é»‘è‰²åŒºåŸŸæ‰€ç¤ºï¼š
    
    å¦‚æœåœ¨åœ°å›¾ä¸­çš„ç°è‰²æ‰€æ ‡è¯†çš„å¹³åŸä¸Šéƒ¨ç½²ä¸€æ”¯ç‚®å…µéƒ¨é˜Ÿï¼Œåˆ™å›¾ä¸­çš„é»‘è‰²çš„ç½‘æ ¼è¡¨ç¤ºå®ƒèƒ½å¤Ÿæ”»å‡»åˆ°çš„åŒºåŸŸï¼šæ²¿æ¨ªå‘å·¦å³å„ä¸¤æ ¼ï¼Œæ²¿çºµå‘ä¸Šä¸‹å„ä¸¤æ ¼ã€‚
    
    å›¾ä¸Šå…¶å®ƒç™½è‰²ç½‘æ ¼å‡æ”»å‡»ä¸åˆ°ã€‚
    
    ä»å›¾ä¸Šå¯è§ç‚®å…µçš„æ”»å‡»èŒƒå›´ä¸å—åœ°å½¢çš„å½±å“ã€‚
    
    ç°åœ¨ï¼Œå°†å†›ä»¬è§„åˆ’å¦‚ä½•éƒ¨ç½²ç‚®å…µéƒ¨é˜Ÿï¼Œåœ¨é˜²æ­¢è¯¯ä¼¤çš„å‰æä¸‹ï¼ˆä¿è¯ä»»ä½•ä¸¤æ”¯ç‚®å…µéƒ¨é˜Ÿä¹‹é—´ä¸èƒ½äº’ç›¸æ”»å‡»ï¼Œå³ä»»ä½•ä¸€æ”¯ç‚®å…µéƒ¨é˜Ÿéƒ½ä¸åœ¨å…¶ä»–æ”¯ç‚®å…µéƒ¨é˜Ÿçš„æ”»å‡»èŒƒå›´å†…ï¼‰ï¼Œåœ¨æ•´ä¸ªåœ°å›¾åŒºåŸŸå†…æœ€å¤šèƒ½å¤Ÿæ‘†æ”¾å¤šå°‘æˆ‘å†›çš„ç‚®å…µéƒ¨é˜Ÿã€‚
    
    ![Untitled](img/yvmitian.png)
    
    ### è¾“å…¥æ ¼å¼
    
    ç¬¬ä¸€è¡ŒåŒ…å«ä¸¤ä¸ªç”±ç©ºæ ¼åˆ†å‰²å¼€çš„æ­£æ•´æ•°ï¼Œåˆ†åˆ«è¡¨ç¤º $N$ å’Œ $M$ï¼›
    
    æ¥ä¸‹æ¥çš„ $N$ è¡Œï¼Œæ¯ä¸€è¡Œå«æœ‰è¿ç»­çš„ $M$ ä¸ªå­—ç¬¦(`P` æˆ–è€… `H`)ï¼Œä¸­é—´æ²¡æœ‰ç©ºæ ¼ã€‚æŒ‰é¡ºåºè¡¨ç¤ºåœ°å›¾ä¸­æ¯ä¸€è¡Œçš„æ•°æ®ã€‚
    
    ### è¾“å‡ºæ ¼å¼
    
    ä»…ä¸€è¡Œï¼ŒåŒ…å«ä¸€ä¸ªæ•´æ•° $K$ï¼Œè¡¨ç¤ºæœ€å¤šèƒ½æ‘†æ”¾çš„ç‚®å…µéƒ¨é˜Ÿçš„æ•°é‡ã€‚
    
    ### æ•°æ®èŒƒå›´
    
    $N \\le 100,M \\le 10$
    
    ### è¾“å…¥æ ·ä¾‹ï¼š
    
    ```
    5 4
    PHPP
    PPHH
    PPPP
    PHPP
    PHHP
    ```
    
    ### è¾“å‡ºæ ·ä¾‹ï¼š
    
    ```
    6
    ```
    
- è§£ç­”

## 2.é›†åˆ

## **524. æ„¤æ€’çš„å°é¸Ÿ**

- é¢˜ç›®
    
    Kiana æœ€è¿‘æ²‰è¿·äºä¸€æ¬¾ç¥å¥‡çš„æ¸¸æˆæ— æ³•è‡ªæ‹”ã€‚
    
    ç®€å•æ¥è¯´ï¼Œè¿™æ¬¾æ¸¸æˆæ˜¯åœ¨ä¸€ä¸ªå¹³é¢ä¸Šè¿›è¡Œçš„ã€‚
    
    æœ‰ä¸€æ¶å¼¹å¼“ä½äºâ€‚$(0,0)$â€‚å¤„ï¼Œæ¯æ¬¡ Kiana å¯ä»¥ç”¨å®ƒå‘ç¬¬ä¸€è±¡é™å‘å°„ä¸€åªçº¢è‰²çš„å°é¸Ÿï¼Œâ€‚å°é¸Ÿä»¬çš„é£è¡Œè½¨è¿¹å‡ä¸ºå½¢å¦‚â€‚$y=ax^2+bx$â€‚çš„æ›²çº¿ï¼Œå…¶ä¸­â€‚$a,b$â€‚æ˜¯ Kiana æŒ‡å®šçš„å‚æ•°ï¼Œä¸”å¿…é¡»æ»¡è¶³â€‚$a<0$ã€‚
    
    å½“å°é¸Ÿè½å›åœ°é¢ï¼ˆå³â€‚$x$â€‚è½´ï¼‰æ—¶ï¼Œå®ƒå°±ä¼šç¬é—´æ¶ˆå¤±ã€‚
    
    åœ¨æ¸¸æˆçš„æŸä¸ªå…³å¡é‡Œï¼Œå¹³é¢çš„ç¬¬ä¸€è±¡é™ä¸­æœ‰â€‚$n$â€‚åªç»¿è‰²çš„å°çŒªï¼Œå…¶ä¸­ç¬¬â€‚$i$â€‚åªå°çŒªæ‰€åœ¨çš„åæ ‡ä¸ºâ€‚$(x\_i,y\_i)$ã€‚
    
    å¦‚æœæŸåªå°é¸Ÿçš„é£è¡Œè½¨è¿¹ç»è¿‡äº†â€‚$(x\_i,â€‚y\_i)$ï¼Œé‚£ä¹ˆç¬¬â€‚$i$â€‚åªå°çŒªå°±ä¼šè¢«æ¶ˆç­æ‰ï¼ŒåŒæ—¶å°é¸Ÿå°†ä¼šæ²¿ç€åŸå…ˆçš„è½¨è¿¹ç»§ç»­é£è¡Œï¼›
    
    å¦‚æœä¸€åªå°é¸Ÿçš„é£è¡Œè½¨è¿¹æ²¡æœ‰ç»è¿‡â€‚$(x\_i,â€‚y\_i)$ï¼Œé‚£ä¹ˆè¿™åªå°é¸Ÿé£è¡Œçš„å…¨è¿‡ç¨‹å°±ä¸ä¼šå¯¹ç¬¬â€‚$i$â€‚åªå°çŒªäº§ç”Ÿä»»ä½•å½±å“ã€‚
    
    ä¾‹å¦‚ï¼Œè‹¥ä¸¤åªå°çŒªåˆ†åˆ«ä½äºâ€‚$(1,3)$â€‚å’Œâ€‚$(3,3)$ï¼ŒKiana å¯ä»¥é€‰æ‹©å‘å°„ä¸€åªé£è¡Œè½¨è¿¹ä¸º $y=âˆ’x^2+4x$â€‚çš„å°é¸Ÿï¼Œè¿™æ ·ä¸¤åªå°çŒªå°±ä¼šè¢«è¿™åªå°é¸Ÿä¸€èµ·æ¶ˆç­ã€‚
    
    è€Œè¿™ä¸ªæ¸¸æˆçš„ç›®çš„ï¼Œå°±æ˜¯é€šè¿‡å‘å°„å°é¸Ÿæ¶ˆç­æ‰€æœ‰çš„å°çŒªã€‚
    
    è¿™æ¬¾ç¥å¥‡æ¸¸æˆçš„æ¯ä¸ªå…³å¡å¯¹ Kiana æ¥è¯´éƒ½å¾ˆéš¾ï¼Œæ‰€ä»¥ Kiana è¿˜è¾“å…¥äº†ä¸€äº›ç¥ç§˜çš„æŒ‡ä»¤ï¼Œä½¿å¾—è‡ªå·±èƒ½æ›´è½»æ¾åœ°å®Œæˆè¿™ä¸ªè¿™ä¸ªæ¸¸æˆã€‚
    
    è¿™äº›æŒ‡ä»¤å°†åœ¨è¾“å…¥æ ¼å¼ä¸­è¯¦è¿°ã€‚
    
    å‡è®¾è¿™æ¬¾æ¸¸æˆä¸€å…±æœ‰â€‚$T$â€‚ä¸ªå…³å¡ï¼Œç°åœ¨ Kiana æƒ³çŸ¥é“ï¼Œå¯¹äºæ¯ä¸€ä¸ªå…³å¡ï¼Œè‡³å°‘éœ€è¦å‘å°„å¤šå°‘åªå°é¸Ÿæ‰èƒ½æ¶ˆç­æ‰€æœ‰çš„å°çŒªã€‚
    
    ç”±äºå¥¹ä¸ä¼šç®—ï¼Œæ‰€ä»¥å¸Œæœ›ç”±ä½ å‘Šè¯‰å¥¹ã€‚
    
    **æ³¨æ„**:æœ¬é¢˜é™¤ NOIP åŸæ•°æ®å¤–ï¼Œè¿˜åŒ…å«åŠ å¼ºæ•°æ®ã€‚
    
    ### è¾“å…¥æ ¼å¼
    
    ç¬¬ä¸€è¡ŒåŒ…å«ä¸€ä¸ªæ­£æ•´æ•° $T$ï¼Œè¡¨ç¤ºæ¸¸æˆçš„å…³å¡æ€»æ•°ã€‚
    
    ä¸‹é¢ä¾æ¬¡è¾“å…¥è¿™ $T$ ä¸ªå…³å¡çš„ä¿¡æ¯ã€‚
    
    æ¯ä¸ªå…³å¡ç¬¬ä¸€è¡ŒåŒ…å«ä¸¤ä¸ªéè´Ÿæ•´æ•° $n,m$ï¼Œåˆ†åˆ«è¡¨ç¤ºè¯¥å…³å¡ä¸­çš„å°çŒªæ•°é‡å’Œ Kiana è¾“å…¥çš„ç¥ç§˜æŒ‡ä»¤ç±»å‹ã€‚
    
    æ¥ä¸‹æ¥çš„ $n$ è¡Œä¸­ï¼Œç¬¬ $i$ è¡ŒåŒ…å«ä¸¤ä¸ªæ­£å®æ•° $(x\_i,y\_i)$ï¼Œè¡¨ç¤ºç¬¬ $i$ åªå°çŒªåæ ‡ä¸º $(x\_i,y\_i)$ï¼Œæ•°æ®ä¿è¯åŒä¸€ä¸ªå…³å¡ä¸­ä¸å­˜åœ¨ä¸¤åªåæ ‡å®Œå…¨ç›¸åŒçš„å°çŒªã€‚
    
    å¦‚æœ $m=0$ï¼Œè¡¨ç¤º Kiana è¾“å…¥äº†ä¸€ä¸ªæ²¡æœ‰ä»»ä½•ä½œç”¨çš„æŒ‡ä»¤ã€‚
    
    å¦‚æœ $m=1$ï¼Œåˆ™è¿™ä¸ªå…³å¡å°†ä¼šæ»¡è¶³ï¼šè‡³å¤šç”¨ $âŒˆn/3+1âŒ‰$ åªå°é¸Ÿå³å¯æ¶ˆç­æ‰€æœ‰å°çŒªã€‚
    
    å¦‚æœ $m=2$ï¼Œåˆ™è¿™ä¸ªå…³å¡å°†ä¼šæ»¡è¶³ï¼šä¸€å®šå­˜åœ¨ä¸€ç§æœ€ä¼˜è§£ï¼Œå…¶ä¸­æœ‰ä¸€åªå°é¸Ÿæ¶ˆç­äº†è‡³å°‘ $âŒŠn/3âŒ‹$ åªå°çŒªã€‚
    
    ä¿è¯ $1 \\le n \\le 18ï¼Œ0 \\le m \\le 2ï¼Œ0<x\_i,y\_i<10$ï¼Œè¾“å…¥ä¸­çš„å®æ•°å‡ä¿ç•™åˆ°å°æ•°ç‚¹åä¸¤ä½ã€‚
    
    ä¸Šæ–‡ä¸­ï¼Œç¬¦å· $âŒˆcâŒ‰$ å’Œ $âŒŠcâŒ‹$ åˆ†åˆ«è¡¨ç¤ºå¯¹ $c$ å‘ä¸Šå–æ•´å’Œå‘ä¸‹å–æ•´ï¼Œä¾‹å¦‚ ï¼š$âŒˆ2.1âŒ‰=âŒˆ2.9âŒ‰=âŒˆ3.0âŒ‰=âŒŠ3.0âŒ‹=âŒŠ3.1âŒ‹=âŒŠ3.9âŒ‹=3$ã€‚
    
    ### è¾“å‡ºæ ¼å¼
    
    å¯¹æ¯ä¸ªå…³å¡ä¾æ¬¡è¾“å‡ºä¸€è¡Œç­”æ¡ˆã€‚
    
    è¾“å‡ºçš„æ¯ä¸€è¡ŒåŒ…å«ä¸€ä¸ªæ­£æ•´æ•°ï¼Œè¡¨ç¤ºç›¸åº”çš„å…³å¡ä¸­ï¼Œæ¶ˆç­æ‰€æœ‰å°çŒªæœ€å°‘éœ€è¦çš„å°é¸Ÿæ•°é‡ã€‚
    
    ### æ•°æ®èŒƒå›´
    
    ![https://cdn.acwing.com/media/article/image/2021/03/11/19_f187a0f582-QQ%E6%88%AA%E5%9B%BE20210311115727.png](https://cdn.acwing.com/media/article/image/2021/03/11/19_f187a0f582-QQ%E6%88%AA%E5%9B%BE20210311115727.png)
    
    ### è¾“å…¥æ ·ä¾‹ï¼š
    
    ```
    2
    2 0
    1.00 3.00
    3.00 3.00
    5 2
    1.00 5.00
    2.00 8.00
    3.00 9.00
    4.00 8.00
    5.00 5.00
    ```
    
    ### è¾“å‡ºæ ·ä¾‹ï¼š
    
    ```
    1
    1
    ```
    
- è§£ç­”
    
    æŠ›ç‰©çº¿ï¼Œé‡å¤è¦†ç›–ï¼ŒçŠ¶æ€å‹ç¼©DP
    
    ```cpp
    #include<iostream>
    #include<algorithm>
    #include<cmath>
    #include<cstring>
    #define x first
    #define y second
    
    using namespace std;
    
    const int N = 18, M = 1 << 18;
    const double eps = 1e-6;
    typedef pair<double, double> PDD;
    
    int n, m;
    PDD q[N];
    int f[M];
    int path[N][N]; // ç»è¿‡ç¬¬iä¸ªç‚¹å’Œç¬¬jä¸ªç‚¹çš„æŠ›ç‰©çº¿æ‰€èƒ½å¤Ÿè¦†ç›–çš„ç‚¹é›†
    
    int cmp(double x, double y){
        if(fabs(x - y) < eps) return 0;
        if(x < y) return -1;
        return 1;
    }
    int main(){
        int T;
        cin >> T;
        while(T --){
            cin >> n >> m;
            for(int i = 0; i < n; i ++)
                cin >> q[i].x >> q[i].y;
            memset(path, 0, sizeof path);
            for(int i = 0; i < n; i ++){
                path[i][i] = 1 << i; // å¯èƒ½å­˜åœ¨åªæœ‰ä¸€ä¸ªç‚¹çš„æƒ…å†µï¼Œéœ€è¦ç‰¹åˆ¤
                for(int j = 0; j < n; j ++){
                    double x1 = q[i].x, y1 = q[i].y;
                    double x2 = q[j].x, y2 = q[j].y;
                    if(!cmp(x1, x2)) continue;
                    double a = (y1 / x1 - y2 / x2) / (x1 - x2);
                    double b = y1 / x1 - a * x1;
                    
                    if(cmp(a, 0) >= 0) continue;
                    int state = 0;
                    for(int k = 0; k < n ; k ++){
                        double x = q[k].x, y = q[k].y;
                        if(!cmp(a * x * x + b * x, y)) state += 1 << k;
                    }
                    path[i][j] = state;
                }
            }
            memset(f, 0x3f, sizeof f);
            f[0] = 0;
            for(int i = 0; i + 1 < 1 << n; i ++){
                int x = 0;
                for(int j = 0; j < n; j ++)
                    if(!(i >> j & 1)){
                        x = j;
                        break;
                    }
                for(int j = 0; j < n; j ++)
                    f[i | path[x][j]] = min(f[i | path[x][j]], f[i] + 1);
            }
            cout << f[(1 << n) - 1] << endl;
        }
        return 0;
    }
    ```
    
- ä¼˜ç§€ä»£ç èµæ
    
    ```cpp
    #include <iostream>
    #include <cstring>
    #include <cmath>
    
    #define x first
    #define y second
    
    using namespace std;
    
    typedef pair<double, double> PDD;
    
    const int N = 20, M = 1 << N;
    const double eps = 1e-8;
    
    int n, m;
    PDD ver[N];
    int path[N][N];
    int f[M];
    
    int cmp_lf(double a, double b)  //æµ®ç‚¹æ•°æ¯”è¾ƒ
    {
        if (fabs(a - b) < eps) return 0;
        if (a > b) return 1;
        return -1;
    }
    void init_path()    //é¢„å¤„ç†æ‰€æœ‰çš„æŠ›ç‰©çº¿
    {
        memset(path, 0, sizeof path);
        for (int i = 0; i < n; ++ i)
        {
            path[i][i] = 1 << i;    //å•ç‹¬ç”Ÿæˆä¸€æ¡åªç»è¿‡(0,0)å’Œ(x,y)çš„æŠ›ç‰©çº¿
            for (int j = 0; j < n; ++ j)
            {
                double x1 = ver[i].x, y1 = ver[i].y;
                double x2 = ver[j].x, y2 = ver[j].y;
                if (!cmp_lf(x1, x2)) continue;  //å•ç‹¬ä¸€ä¸ªç‚¹æ— æ³•ç”Ÿæˆå‚æ•°a,bçš„æŠ›ç‰©çº¿
                double a = (y1 / x1 - y2 / x2) / (x1 - x2);
                double b = (y1 / x1) - a * x1;
                if (cmp_lf(a, 0.0) >= 0) continue;  //a < 0
                //å‚æ•°a,bçš„æŠ›ç‰©çº¿å·²ç”Ÿæˆï¼Œæšä¸¾ä»–ç»è¿‡çš„æ‰€æœ‰ç‚¹
                for (int k = 0; k < n; ++ k)
                {
                    double x = ver[k].x, y = ver[k].y;
                    if (!cmp_lf(y, a * x * x + b * x)) path[i][j] += 1 << k;
                }
            }
        }
    }
    void solve()
    {
        //input
        cin >> n >> m;
        for (int i = 0; i < n; ++ i) cin >> ver[i].x >> ver[i].y;
        //prework
        init_path();
        //dp
        memset(f, 0x3f, sizeof f);
        f[0] = 0;
        for (int cur_st = 0; cur_st + 1 < 1 << n; ++ cur_st)
        {
            int t = -1;
            for (int i = 0; i < n; ++ i)
                if (!(cur_st >> i & 1))
                    t = i;
            for (int i = 0; i < n; ++ i)
            {
                int ne_st = path[t][i] | cur_st;
                f[ne_st] = min(f[ne_st], f[cur_st] + 1);
            }
        }
        cout << f[(1 << n) - 1] << endl;
    }
    int main()
    {
        int T = 1; cin >> T;
        while (T -- ) solve();
        return 0;
    }
    ```

## **91.æœ€çŸ­Hamiltonè·¯å¾„**

- é¢˜ç›®

    ç»™å®šä¸€å¼  $n$ ä¸ªç‚¹çš„å¸¦æƒæ— å‘å›¾ï¼Œç‚¹ä» $0 \\sim n-1$ æ ‡å·ï¼Œæ±‚èµ·ç‚¹ $0$ åˆ°ç»ˆç‚¹ $n-1$ çš„æœ€çŸ­ Hamilton è·¯å¾„ã€‚

    Hamilton è·¯å¾„çš„å®šä¹‰æ˜¯ä» $0$ åˆ° $n-1$ ä¸é‡ä¸æ¼åœ°ç»è¿‡æ¯ä¸ªç‚¹æ°å¥½ä¸€æ¬¡ã€‚

    ### è¾“å…¥æ ¼å¼

    ç¬¬ä¸€è¡Œè¾“å…¥æ•´æ•° $n$ã€‚

    æ¥ä¸‹æ¥ $n$ è¡Œæ¯è¡Œ $n$ ä¸ªæ•´æ•°ï¼Œå…¶ä¸­ç¬¬ $i$ è¡Œç¬¬ $j$ ä¸ªæ•´æ•°è¡¨ç¤ºç‚¹ $i$ åˆ° $j$ çš„è·ç¦»ï¼ˆè®°ä¸º $a\[i,j\]$ï¼‰ã€‚

    å¯¹äºä»»æ„çš„ $x,y,z$ï¼Œæ•°æ®ä¿è¯ $a\[x,x\]=0ï¼Œa\[x,y\]=a\[y,x\]$ å¹¶ä¸” $a\[x,y\]+a\[y,z\] \\ge a\[x,z\]$ã€‚

    ### è¾“å‡ºæ ¼å¼

    è¾“å‡ºä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºæœ€çŸ­ Hamilton è·¯å¾„çš„é•¿åº¦ã€‚

    ### æ•°æ®èŒƒå›´

    $1 \\le n \\le 20$  
    $0 \\le a\[i,j\] \\le 10^7$

    ### è¾“å…¥æ ·ä¾‹ï¼š

    ```
    5
    0 2 4 5 1
    2 0 6 5 3
    4 6 0 8 3
    5 5 8 0 5
    1 3 3 5 0
    ```

    ### è¾“å‡ºæ ·ä¾‹ï¼š

    ```
    18
    ```

- è§£ç­”

    ``` cpp
    #include <iostream>
    #include <algorithm>
    #include <cstring>
    using namespace std;
    const int N = 20, M = 1 << 20;
    int n, f[M][N], w[N][N];  // f[i][j]çš„å«ä¹‰æ˜¯èµ°åˆ°äº†jï¼Œèµ°è¿‡çš„ç‚¹æ˜¯içš„è·¯å¾„

    int main() {
        cin >> n;
        
        for(int i = 0; i < n; i ++) {
            for(int j = 0; j < n; j ++) {
                cin >> w[i][j];
            }
        }
        memset(f, 0x3f, sizeof f);
        f[1][0] = 0;  // ä»0å¼€å§‹èµ°ï¼Œèµ°è¿‡äº†0å·ç‚¹
        
        for(int i = 0; i < 1 << n; i ++) {
            for(int j = 0; j < n; j ++) {
                if(i >> j & 1) {
                    for(int k = 0; k < n; k ++) { // åˆ—ä¸¾ä¸Šä¸€ä¸ªçŠ¶æ€çš„ç‚¹
                        if(i - (1 << j) >> k & 1) {
                            f[i][j] = min(f[i][j], f[i - (1 << j)][k] + w[j][k]);
                        }
                    }
                }
            }
        }
        cout << f[(1 << n) - 1][n - 1] << endl;
            
        return 0;
    }
    ```


# åŒºé—´DP

### åŸºç¡€ï¼š

## **282.** çŸ³å­åˆå¹¶

- é¢˜ç›®
    
    è®¾æœ‰Â NÂ å †çŸ³å­æ’æˆä¸€æ’ï¼Œå…¶ç¼–å·ä¸ºÂ 1ï¼Œ2ï¼Œ3ï¼Œâ€¦ï¼ŒNã€‚
    
    æ¯å †çŸ³å­æœ‰ä¸€å®šçš„è´¨é‡ï¼Œå¯ä»¥ç”¨ä¸€ä¸ªæ•´æ•°æ¥æè¿°ï¼Œç°åœ¨è¦å°†è¿™Â NÂ å †çŸ³å­åˆå¹¶æˆä¸ºä¸€å †ã€‚
    
    æ¯æ¬¡åªèƒ½åˆå¹¶ç›¸é‚»çš„ä¸¤å †ï¼Œåˆå¹¶çš„ä»£ä»·ä¸ºè¿™ä¸¤å †çŸ³å­çš„è´¨é‡ä¹‹å’Œï¼Œåˆå¹¶åä¸è¿™ä¸¤å †çŸ³å­ç›¸é‚»çš„çŸ³å­å°†å’Œæ–°å †ç›¸é‚»ï¼Œåˆå¹¶æ—¶ç”±äºé€‰æ‹©çš„é¡ºåºä¸åŒï¼Œåˆå¹¶çš„æ€»ä»£ä»·ä¹Ÿä¸ç›¸åŒã€‚
    
    æ‰¾å‡ºä¸€ç§åˆç†çš„æ–¹æ³•ï¼Œä½¿æ€»çš„ä»£ä»·æœ€å°ï¼Œè¾“å‡ºæœ€å°ä»£ä»·ã€‚
    
- è§£ç­”
    
    å…ˆå¾ªç¯åŒºé—´é•¿åº¦ åœ¨å¾ªç¯å·¦ç«¯ç‚¹
    
    ```cpp
    #include<iostream>
    #include<cstring>
    using namespace std;
    const int N = 310;
    int f[N][N];
    int w[N], s[N];
    int main(){
        int n;
        cin >> n;
        for(int i = 1; i <= n; i ++){
            cin >> w[i];
            s[i] = s[i - 1] + w[i];
        }
        memset(f, 0x3f, sizeof f);
        for(int len = 1; len <= n; len ++)
            for(int l = 1; l + len - 1 <= n; l ++){
                int r = l + len - 1;
                if(len == 1){
                    f[l][r] = 0;
                    continue;
                }
                for(int k = l; k < r; k ++)
                    f[l][r] = min(f[l][r], f[l][k] + f[k + 1][r] + s[r] - s[l - 1]);
            }
        cout << f[1][n] << endl;
        return 0;
    }
    ```
    

### å¸¸ç”¨æŠ€å·§ï¼š

## 1. å°†ç¯å½¢çš„åŒºé—´å˜ä¸ºä¸€æ¡é“¾

å°†ä¸¤æ®µé•¿ä¸ºnçš„åŒºé—´è¿åœ¨ä¸€èµ·ï¼ŒæŒ‰ç…§æœ´ç´ çš„æ–¹æ³•è¿›è¡Œé¢„å¤„ç†ï¼Œç„¶åæšä¸¾å‡ºé•¿åº¦ä¸ºnçš„æœ€å°å€¼

## **1068. ç¯å½¢çŸ³å­åˆå¹¶**

- é¢˜ç›®
    
    å°† $n$ å †çŸ³å­ç»•åœ†å½¢æ“åœºæ’æ”¾ï¼Œç°è¦å°†çŸ³å­æœ‰åºåœ°åˆå¹¶æˆä¸€å †ã€‚
    
    è§„å®šæ¯æ¬¡åªèƒ½é€‰ç›¸é‚»çš„ä¸¤å †åˆå¹¶æˆæ–°çš„ä¸€å †ï¼Œå¹¶å°†æ–°çš„ä¸€å †çš„çŸ³å­æ•°è®°åšè¯¥æ¬¡åˆå¹¶çš„å¾—åˆ†ã€‚
    
    è¯·ç¼–å†™ä¸€ä¸ªç¨‹åºï¼Œè¯»å…¥å †æ•° $n$ åŠæ¯å †çš„çŸ³å­æ•°ï¼Œå¹¶è¿›è¡Œå¦‚ä¸‹è®¡ç®—ï¼š
    
    - é€‰æ‹©ä¸€ç§åˆå¹¶çŸ³å­çš„æ–¹æ¡ˆï¼Œä½¿å¾—åš $n-1$ æ¬¡åˆå¹¶å¾—åˆ†æ€»å’Œæœ€å¤§ã€‚
    - é€‰æ‹©ä¸€ç§åˆå¹¶çŸ³å­çš„æ–¹æ¡ˆï¼Œä½¿å¾—åš $n-1$ æ¬¡åˆå¹¶å¾—åˆ†æ€»å’Œæœ€å°ã€‚
    
    ### è¾“å…¥æ ¼å¼
    
    ç¬¬ä¸€è¡ŒåŒ…å«æ•´æ•° $n$ï¼Œè¡¨ç¤ºå…±æœ‰ $n$ å †çŸ³å­ã€‚
    
    ç¬¬äºŒè¡ŒåŒ…å« $n$ ä¸ªæ•´æ•°ï¼Œåˆ†åˆ«è¡¨ç¤ºæ¯å †çŸ³å­çš„æ•°é‡ã€‚
    
    ### è¾“å‡ºæ ¼å¼
    
    è¾“å‡ºå…±ä¸¤è¡Œï¼š
    
    ç¬¬ä¸€è¡Œä¸ºåˆå¹¶å¾—åˆ†æ€»å’Œæœ€å°å€¼ï¼Œ
    
    ç¬¬äºŒè¡Œä¸ºåˆå¹¶å¾—åˆ†æ€»å’Œæœ€å¤§å€¼ã€‚
    
    ### æ•°æ®èŒƒå›´
    
    $1 \\le n \\le 200$
    
    ### è¾“å…¥æ ·ä¾‹ï¼š
    
    ```
    4
    4 5 9 4
    ```
    
    ### è¾“å‡ºæ ·ä¾‹ï¼š
    
    ```
    43
    54
    ```
    
- è§£ç­”
    
    ```cpp
    #include<iostream>
    #include<algorithm>
    #include<cstring>
    using namespace std;
    const int N = 410, INF = 0x3f3f3f3f;
    int w[N], s[N];
    int f[N][N], g[N][N];
    int n;
    
    int main(){
        cin >> n;
        for(int i = 1; i <= n; i ++){
            cin >> w[i];
            w[i + n] = w[i];
        }
        for(int i = 1; i <= n * 2; i ++)
            s[i] = s[i - 1] + w[i];
        memset(f, INF, sizeof f);
        memset(g, - INF, sizeof g);
        for(int len = 1; len <= n; len ++)
            for(int l = 1; l + len - 1 <= n * 2; l ++){
                int r = l + len - 1;
                if(len == 1) f[l][r] = g[l][r] = 0;
                else
                    for(int k = l; k < r; k ++){ // k + 1 <= r
                        f[l][r] = min(f[l][r], f[l][k] + f[k + 1][r] + s[r] - s[l - 1]);
                        g[l][r] = max(g[l][r], g[l][k] + g[k + 1][r] + s[r] - s[l - 1]);
                    }
            }
            
        int maxv = -INF, minv = INF;
        for(int i = 1; i <= n; i ++){
            minv = min(minv, f[i][i + n - 1]);
            maxv = max(maxv, g[i][i + n - 1]);
        }
        cout << minv << endl << maxv << endl;
        return 0;
    }
    ```
    

## **320. èƒ½é‡é¡¹é“¾**

- é¢˜ç›®
    
    åœ¨ Mars æ˜Ÿçƒä¸Šï¼Œæ¯ä¸ª Mars äººéƒ½éšèº«ä½©å¸¦ç€ä¸€ä¸²èƒ½é‡é¡¹é“¾ï¼Œåœ¨é¡¹é“¾ä¸Šæœ‰ $N$ é¢—èƒ½é‡ç ã€‚
    
    èƒ½é‡ç æ˜¯ä¸€é¢—æœ‰å¤´æ ‡è®°ä¸å°¾æ ‡è®°çš„ç å­ï¼Œè¿™äº›æ ‡è®°å¯¹åº”ç€æŸä¸ªæ­£æ•´æ•°ã€‚
    
    å¹¶ä¸”ï¼Œå¯¹äºç›¸é‚»çš„ä¸¤é¢—ç å­ï¼Œå‰ä¸€é¢—ç å­çš„å°¾æ ‡è®°ä¸€å®šç­‰äºåä¸€é¢—ç å­çš„å¤´æ ‡è®°ã€‚
    
    å› ä¸ºåªæœ‰è¿™æ ·ï¼Œé€šè¿‡å¸ç›˜ï¼ˆå¸ç›˜æ˜¯ Mars äººå¸æ”¶èƒ½é‡çš„ä¸€ç§å™¨å®˜ï¼‰çš„ä½œç”¨ï¼Œè¿™ä¸¤é¢—ç å­æ‰èƒ½èšåˆæˆä¸€é¢—ç å­ï¼ŒåŒæ—¶é‡Šæ”¾å‡ºå¯ä»¥è¢«å¸ç›˜å¸æ”¶çš„èƒ½é‡ã€‚
    
    å¦‚æœå‰ä¸€é¢—èƒ½é‡ç çš„å¤´æ ‡è®°ä¸º $m$ï¼Œå°¾æ ‡è®°ä¸º $r$ï¼Œåä¸€é¢—èƒ½é‡ç çš„å¤´æ ‡è®°ä¸º $r$ï¼Œå°¾æ ‡è®°ä¸º $n$ï¼Œåˆ™èšåˆåé‡Šæ”¾çš„èƒ½é‡ä¸º $m \\times r \\times n$ï¼ˆMars å•ä½ï¼‰ï¼Œæ–°äº§ç”Ÿçš„ç å­çš„å¤´æ ‡è®°ä¸º $m$ï¼Œå°¾æ ‡è®°ä¸º $n$ã€‚
    
    éœ€è¦æ—¶ï¼ŒMars äººå°±ç”¨å¸ç›˜å¤¹ä½ç›¸é‚»çš„ä¸¤é¢—ç å­ï¼Œé€šè¿‡èšåˆå¾—åˆ°èƒ½é‡ï¼Œç›´åˆ°é¡¹é“¾ä¸Šåªå‰©ä¸‹ä¸€é¢—ç å­ä¸ºæ­¢ã€‚
    
    æ˜¾ç„¶ï¼Œä¸åŒçš„èšåˆé¡ºåºå¾—åˆ°çš„æ€»èƒ½é‡æ˜¯ä¸åŒçš„ï¼Œè¯·ä½ è®¾è®¡ä¸€ä¸ªèšåˆé¡ºåºï¼Œä½¿ä¸€ä¸²é¡¹é“¾é‡Šæ”¾å‡ºçš„æ€»èƒ½é‡æœ€å¤§ã€‚
    
    ä¾‹å¦‚ï¼šè®¾ $N=4$ï¼Œ$4$ é¢—ç å­çš„å¤´æ ‡è®°ä¸å°¾æ ‡è®°ä¾æ¬¡ä¸º $(2ï¼Œ3) (3ï¼Œ5) (5ï¼Œ10) (10ï¼Œ2)$ã€‚
    
    æˆ‘ä»¬ç”¨è®°å· $âŠ•$ è¡¨ç¤ºä¸¤é¢—ç å­çš„èšåˆæ“ä½œï¼Œ$(jâŠ•k)$ è¡¨ç¤ºç¬¬ $j$ï¼Œ$k$ ä¸¤é¢—ç å­èšåˆåæ‰€é‡Šæ”¾çš„èƒ½é‡ã€‚åˆ™
    
    ç¬¬ $4ã€1$ ä¸¤é¢—ç å­èšåˆåé‡Šæ”¾çš„èƒ½é‡ä¸ºï¼š$(4âŠ•1)=10 \\times 2 \\times 3=60$ã€‚
    
    è¿™ä¸€ä¸²é¡¹é“¾å¯ä»¥å¾—åˆ°æœ€ä¼˜å€¼çš„ä¸€ä¸ªèšåˆé¡ºåºæ‰€é‡Šæ”¾çš„æ€»èƒ½é‡ä¸º $((4 \\oplus 1) \\oplus 2) \\oplus 3) = 10 \\times 2 \\times 3+10 \\times 3 \\times 5+10 \\times 5 \\times 10=710$ã€‚
    
    ### è¾“å…¥æ ¼å¼
    
    è¾“å…¥çš„ç¬¬ä¸€è¡Œæ˜¯ä¸€ä¸ªæ­£æ•´æ•° $N$ï¼Œè¡¨ç¤ºé¡¹é“¾ä¸Šç å­çš„ä¸ªæ•°ã€‚
    
    ç¬¬äºŒè¡Œæ˜¯ $N$ ä¸ªç”¨ç©ºæ ¼éš”å¼€çš„æ­£æ•´æ•°ï¼Œæ‰€æœ‰çš„æ•°å‡ä¸è¶…è¿‡ $1000$ï¼Œç¬¬ $i$ ä¸ªæ•°ä¸ºç¬¬ $i$ é¢—ç å­çš„å¤´æ ‡è®°ï¼Œå½“ $i<N$ æ—¶ï¼Œç¬¬ $i$ é¢—ç å­çš„å°¾æ ‡è®°åº”è¯¥ç­‰äºç¬¬ $i+1$ é¢—ç å­çš„å¤´æ ‡è®°ï¼Œç¬¬ $N$ é¢—ç å­çš„å°¾æ ‡è®°åº”è¯¥ç­‰äºç¬¬ $1$ é¢—ç å­çš„å¤´æ ‡è®°ã€‚
    
    è‡³äºç å­çš„é¡ºåºï¼Œä½ å¯ä»¥è¿™æ ·ç¡®å®šï¼šå°†é¡¹é“¾æ”¾åˆ°æ¡Œé¢ä¸Šï¼Œä¸è¦å‡ºç°äº¤å‰ï¼Œéšæ„æŒ‡å®šç¬¬ä¸€é¢—ç å­ï¼Œç„¶åæŒ‰é¡ºæ—¶é’ˆæ–¹å‘ç¡®å®šå…¶ä»–ç å­çš„é¡ºåºã€‚
    
    ### è¾“å‡ºæ ¼å¼
    
    è¾“å‡ºåªæœ‰ä¸€è¡Œï¼Œæ˜¯ä¸€ä¸ªæ­£æ•´æ•° $E$ï¼Œä¸ºä¸€ä¸ªæœ€ä¼˜èšåˆé¡ºåºæ‰€é‡Šæ”¾çš„æ€»èƒ½é‡ã€‚
    
    ### æ•°æ®èŒƒå›´
    
    $4 \\le N \\le 100$,
    $1 \\le E \\le 2.1 \\times 10^9$
    
    ### è¾“å…¥æ ·ä¾‹ï¼š
    
    ```
    4
    2 3 5 10
    ```
    
    ### è¾“å‡ºæ ·ä¾‹ï¼š
    
    ```
    710
    ```
    
- è§£ç­”
    
    çŠ¶æ€è¡¨ç¤ºï¼šf[L, R] æ˜¯æ‰€æœ‰å°†L, Råˆå¹¶åœ¨ä¸€ä¸ªçŸ©é˜µçš„æ‰€æœ‰çš„æ–¹å¼ã€‚å±æ€§ï¼šMax
    
    çŠ¶æ€è®¡ç®—ï¼šé€šè¿‡æœ€åä¸€ä¸ªä¸åŒç‚¹å°†é›†åˆåˆ’åˆ†
    
    ç¬¬kç±»çš„æœ€å¤§çš„å€¼æ˜¯f[l, k] + f[k, r] + w[l] * w[k] * w[r];
    
    æ±‚æ¯ä¸€ç±»çš„æœ€å¤§å€¼
    
    ```cpp
    #include<iostream>
    #include<cstring>
    using namespace std;
    const int N = 110, M = N << 1;
    int f[M][M], w[M], n;
    int main(){
        cin >> n;
        for(int i = 1; i <= n; i ++){
            cin >> w[i];
            w[i + n] = w[i];
        }
        //memset(f, 0xcf, sizeof f); // ç”±äºä¸å­˜åœ¨è´Ÿæ•°çš„çŠ¶æ€æ‰€ä»¥å¯ä»¥ä¸åˆå§‹åŒ–
        for(int len = 3; len <= n + 1; len ++)
            for(int l = 1; l + len - 1 <= n << 1; l ++){
                int r = l + len - 1;
                for(int k = l + 1; k < r; k ++)
                    f[l][r] = max(f[l][r], f[l][k] + f[k][r] + w[l] * w[k] * w[r]);
            }
        int res = 0;
        for(int i = 1; i <= n; i ++)
            res = max(res, f[i][i + n]);
        cout << res << endl;
        return 0;
    }
    ```
    
- å…¶ä»–å†™æ³•
    
    ```cpp
    #include <iostream>
    #include <cstring>
    using namespace std;
    const int N = 110, M = N << 1;
    int n, w[M], f[M][M];
    
    int main(){
        scanf("%d", &n);
        for (int i = 1; i <= n; ++ i) scanf("%d", &w[i]), w[n + i] = w[i];
        memset(f, -0x3f, sizeof f); //æœ¬é¢˜å¯ä»¥ä¸ç”¨åˆå§‹åŒ–ï¼Œå› ä¸ºä¸å­˜åœ¨è´Ÿæ•°çš„çŠ¶æ€å€¼ï¼Œå› æ­¤0å°±æ˜¯æœ€å°çš„
        for (int len = 2; len <= n + 1; ++ len)
            for (int l = 1, r; (r = l + len - 1) <= n << 1; ++ l)
                if (len == 2) f[l][r] = 0; //åˆå§‹åŒ–åˆå§‹çŠ¶æ€
                else
                    for (int k = l + 1; k < r; ++ k)
                        f[l][r] = max(f[l][r], f[l][k] + f[k][r] + w[l] * w[k] * w[r]);
        int res = 0;
        for (int l = 1; l <= n; ++ l) res = max(res, f[l][l + n]);
        printf("%d\n", res);
        return 0;
    }
    ```
    
- å…¶ä»–è§£æ³•
    
    ```cpp
    #include<iostream>
    #include<algorithm>
    using namespace std;
    const int N=210,INF=0x3f3f3f3f;
    int n;
    int a[N];
    int g[N][N];
    
    int main(){
        cin>>n;
        for(int i=1;i<=n;i++){
            cin>>a[i];
            a[i+n]=a[i];
        }
    
        for(int len=1;len<=n;len++)
            for(int i=1;i+len-1<=n*2;i++){
                int l=i,r=i+len-1;
                if(len==1)  g[l][r]=0;
                for(int k=l;k<r;k++)    g[l][r]=max(g[l][r],g[l][k]+g[k+1][r]+a[l]*a[k+1]*a[r+1]);
                //è¿™é‡Œçš„è¿‡ç¨‹åŒçŸ³å­åˆå¹¶ï¼Œè¿™é‡Œä¸éš¾æƒ³åˆ°è‹¥å°†låˆ°kçš„ç å­åˆå¹¶ä¹‹åä¼šå˜æˆä¸€ä¸ªé¦–æ˜¯lè€Œå°¾k+1çš„ç å­ï¼›
                //åŒç†è‹¥å°†k+1åˆ°rçš„ç å­åˆå¹¶ä¹‹åä¼šå˜æˆä¸€ä¸ªé¦–æ˜¯k+1è€Œå°¾r+1çš„ç å­ï¼›
            }
        int maxv=-INF;
        for(int i=1;i<=n;i++)
            maxv=max(g[i][i+n-1],maxv);//åŒºé—´é•¿åº¦ä¸ºn
        cout<< maxv <<endl;
        return 0;
    }
    ```
    

## 2. åŒºé—´DPè®°å½•æ–¹æ¡ˆæ•°

## **479. åŠ åˆ†äºŒå‰æ ‘**

- é¢˜ç›®
    
    è®¾ä¸€ä¸ª $n$ ä¸ªèŠ‚ç‚¹çš„äºŒå‰æ ‘ tree çš„ä¸­åºéå†ä¸ºï¼ˆ$1,2,3,â€¦,n$ï¼‰ï¼Œå…¶ä¸­æ•°å­— $1,2,3,â€¦,n$ ä¸ºèŠ‚ç‚¹ç¼–å·ã€‚
    
    æ¯ä¸ªèŠ‚ç‚¹éƒ½æœ‰ä¸€ä¸ªåˆ†æ•°ï¼ˆå‡ä¸ºæ­£æ•´æ•°ï¼‰ï¼Œè®°ç¬¬ $i$ ä¸ªèŠ‚ç‚¹çš„åˆ†æ•°ä¸º $d\_i$ï¼Œtree åŠå®ƒçš„æ¯ä¸ªå­æ ‘éƒ½æœ‰ä¸€ä¸ªåŠ åˆ†ï¼Œä»»ä¸€æ£µå­æ ‘ subtreeï¼ˆä¹ŸåŒ…å« tree æœ¬èº«ï¼‰çš„åŠ åˆ†è®¡ç®—æ–¹æ³•å¦‚ä¸‹ï¼š
    
    subtreeçš„å·¦å­æ ‘çš„åŠ åˆ† $Ã—$ subtreeçš„å³å­æ ‘çš„åŠ åˆ† $ï¼‹$ subtreeçš„æ ¹çš„åˆ†æ•°
    
    è‹¥æŸä¸ªå­æ ‘ä¸ºç©ºï¼Œè§„å®šå…¶åŠ åˆ†ä¸º $1$ã€‚
    
    å¶å­çš„åŠ åˆ†å°±æ˜¯å¶èŠ‚ç‚¹æœ¬èº«çš„åˆ†æ•°ï¼Œä¸è€ƒè™‘å®ƒçš„ç©ºå­æ ‘ã€‚
    
    è¯•æ±‚ä¸€æ£µç¬¦åˆä¸­åºéå†ä¸ºï¼ˆ$1,2,3,â€¦,n$ï¼‰ä¸”åŠ åˆ†æœ€é«˜çš„äºŒå‰æ ‘ treeã€‚
    
    è¦æ±‚è¾“å‡ºï¼š
    
    ï¼ˆ1ï¼‰treeçš„æœ€é«˜åŠ åˆ†
    
    ï¼ˆ2ï¼‰treeçš„å‰åºéå†
    
    ### è¾“å…¥æ ¼å¼
    
    ç¬¬ $1$ è¡Œï¼šä¸€ä¸ªæ•´æ•° $n$ï¼Œä¸ºèŠ‚ç‚¹ä¸ªæ•°ã€‚
    
    ç¬¬ $2$ è¡Œï¼š$n$ ä¸ªç”¨ç©ºæ ¼éš”å¼€çš„æ•´æ•°ï¼Œä¸ºæ¯ä¸ªèŠ‚ç‚¹çš„åˆ†æ•°ï¼ˆ$0<$åˆ†æ•°$<100$ï¼‰ã€‚
    
    ### è¾“å‡ºæ ¼å¼
    
    ç¬¬ $1$ è¡Œï¼šä¸€ä¸ªæ•´æ•°ï¼Œä¸ºæœ€é«˜åŠ åˆ†ï¼ˆç»“æœä¸ä¼šè¶…è¿‡`int`èŒƒå›´ï¼‰ã€‚
    
    ç¬¬ $2$ è¡Œï¼š$n$ ä¸ªç”¨ç©ºæ ¼éš”å¼€çš„æ•´æ•°ï¼Œä¸ºè¯¥æ ‘çš„å‰åºéå†ã€‚å¦‚æœå­˜åœ¨å¤šç§æ–¹æ¡ˆï¼Œåˆ™è¾“å‡ºå­—å…¸åºæœ€å°çš„æ–¹æ¡ˆã€‚
    
    ### æ•°æ®èŒƒå›´
    
    $n < 30$
    
    ### è¾“å…¥æ ·ä¾‹ï¼š
    
    ```
    5
    5 7 1 2 10
    ```
    
    ### è¾“å‡ºæ ·ä¾‹ï¼š
    
    ```
    145
    3 1 2 4 5
    ```
    
- è§£ç­”
    - åŒºé—´DP
        
        ```cpp
        #include<iostream>
        #include<cstring>
        using namespace std;
        const int N = 35;
        int f[N][N]; // è¡¨ç¤ºåŒºé—´çš„æœ€é«˜çš„åŠ åˆ†
        int g[N][N]; // ä¿å­˜l, råŒºé—´çš„æ ¹èŠ‚ç‚¹çš„åºå·
        int w[N], n;
        
        void dfs(int l, int r){ // é€’å½’æ‰“å°æ ‘çš„å‰åºéå†
            if(l > r) return ;
            int k = g[l][r];
            cout << k << " ";
            dfs(l, k - 1);
            dfs(k + 1, r);
        }
        
        int main(){
            cin >> n;
            for(int i = 1; i <= n; i ++) cin >> w[i];
            // ä¿å­˜ä¸­åºéå†ä¸º1,2,3...nçš„æ ¹èŠ‚ç‚¹çš„å€¼
            for(int len = 1; len <= n; len ++)
                for(int l = 1; l + len - 1 <= n; l ++){
                    int r = l + len - 1;
                    if(len == 1){ // åˆå§‹åŒ–ï¼Œæ­¤æ—¶r=l
                        f[l][r] = w[l];
                        g[l][r] = l;
                        continue;
                    }
                    for(int k = l; k <= r; k ++){
        								// å¦‚æœæ²¡æœ‰å·¦(å³)èŠ‚ç‚¹, å°†å…¶åŠ åˆ†è®¾ç½®ä¸º1
                        int left = k == l ? 1 : f[l][k - 1];
                        int right = k == r ? 1 : f[k + 1][r];
                        int score = left * right + w[k];
                        if(f[l][r] < score){
        										// æ±‚å­—å…¸åºæœ€å°çš„ä¸€ä¸ªç­”æ¡ˆ
        										//å¯çŸ¥å…¶æ ¹èŠ‚ç‚¹è¶Šé å‰ å­—å…¸åºè¶Šå°
                            f[l][r] = score;
                            g[l][r] = k;
                        }
                    }
                }
            cout << f[1][n] << endl;
            dfs(1, n);
            return 0;
        }
        ```
        
    - è®°å¿†åŒ–æœç´¢

        ç­‰å¾…å¡«å……

## 3. åŒºé—´DP+é«˜ç²¾åº¦

## **1069. å‡¸å¤šè¾¹å½¢çš„åˆ’åˆ†**

- é¢˜ç›®
    
    ç»™å®šä¸€ä¸ªå…·æœ‰ $N$ ä¸ªé¡¶ç‚¹çš„å‡¸å¤šè¾¹å½¢ï¼Œå°†é¡¶ç‚¹ä» $1$ è‡³ $N$ æ ‡å·ï¼Œæ¯ä¸ªé¡¶ç‚¹çš„æƒå€¼éƒ½æ˜¯ä¸€ä¸ªæ­£æ•´æ•°ã€‚
    
    å°†è¿™ä¸ªå‡¸å¤šè¾¹å½¢åˆ’åˆ†æˆ $N-2$ ä¸ªäº’ä¸ç›¸äº¤çš„ä¸‰è§’å½¢ï¼Œå¯¹äºæ¯ä¸ªä¸‰è§’å½¢ï¼Œå…¶ä¸‰ä¸ªé¡¶ç‚¹çš„æƒå€¼ç›¸ä¹˜éƒ½å¯å¾—åˆ°ä¸€ä¸ªæƒå€¼ä¹˜ç§¯ï¼Œè¯•æ±‚æ‰€æœ‰ä¸‰è§’å½¢çš„é¡¶ç‚¹æƒå€¼ä¹˜ç§¯ä¹‹å’Œè‡³å°‘ä¸ºå¤šå°‘ã€‚
    
    ### è¾“å…¥æ ¼å¼
    
    ç¬¬ä¸€è¡ŒåŒ…å«æ•´æ•° $N$ï¼Œè¡¨ç¤ºé¡¶ç‚¹æ•°é‡ã€‚
    
    ç¬¬äºŒè¡ŒåŒ…å« $N$ ä¸ªæ•´æ•°ï¼Œä¾æ¬¡ä¸ºé¡¶ç‚¹ $1$ è‡³é¡¶ç‚¹ $N$ çš„æƒå€¼ã€‚
    
    ### è¾“å‡ºæ ¼å¼
    
    è¾“å‡ºä»…ä¸€è¡Œï¼Œä¸ºæ‰€æœ‰ä¸‰è§’å½¢çš„é¡¶ç‚¹æƒå€¼ä¹˜ç§¯ä¹‹å’Œçš„æœ€å°å€¼ã€‚
    
    ### æ•°æ®èŒƒå›´
    
    $N \\le 50$,
    æ•°æ®ä¿è¯æ‰€æœ‰é¡¶ç‚¹çš„æƒå€¼éƒ½å°äº$10^9$
    
    ### è¾“å…¥æ ·ä¾‹ï¼š
    
    ```
    5
    121 122 123 245 231
    ```
    
    ### è¾“å‡ºæ ·ä¾‹ï¼š
    
    ```
    12214884
    ```
    
- è§£ç­”
    - ä¸å¸¦æœ‰é«˜ç²¾åº¦çš„å†™æ³•
        
        ```cpp
        #include<iostream>
        #include<cstring>
        using namespace std;
        const int N = 55, M = 35, INF = 1e9;
        int n;
        int w[N];
        int f[N][N]; // å½“å‰åˆ’åˆ†åˆ°çš„å¤šè¾¹å½¢çš„å·¦ç«¯ç‚¹æ˜¯ lï¼Œå³ç«¯ç‚¹æ˜¯ r çš„æ–¹æ¡ˆ
        
        int main (){
            cin >> n;
            for(int i = 1; i <= n; i ++) cin >> w[i];
            memset(f, 0x3f, sizeof f);
            for(int len = 2; len <= n; len ++)
                for(int l = 1; l + len - 1 <= n; l ++){
                    int r = l + len - 1;
                    if(len == 2) f[l][r] = 0; // è¿™æ˜¯ä¸€æ¡è¾¹çš„æƒ…å†µ åˆå§‹åŒ–f[l][l+1]ä¸º0
                    for(int k = l + 1; k < r; k ++)
                        f[l][r] = min(f[l][r], f[l][k] + f[k][r] + w[l] * w[k] * w[r]);      
                }
            cout << f[1][n] << endl;
            return 0;
        }
        ```
        
        ```cpp
        #include<iostream>
        #include<cstring>
        using namespace std;
        const int N = 55, M = 35, INF = 1e9;
        int n;
        int w[N];
        int f[N][N];
        
        int main (){
            cin >> n;
            for(int i = 1; i <= n; i ++) cin >> w[i];
        
            for(int len = 3; len <= n; len ++)
                for(int l = 1; l + len - 1 <= n; l ++){
                    int r = l + len - 1;
                    f[l][r] = INF;
                    for(int k = l + 1; k < r; k ++)
                        f[l][r] = min(f[l][r], f[l][k] + f[k][r] + w[l] * w[k] * w[r]);      
                }
            cout << f[1][n] << endl;
            return 0;
        }
        ```
        
    - é«˜ç²¾åº¦çš„å†™æ³•
        
        ```cpp
        #include <cstring>
        #include <iostream>
        #include <algorithm>
        using namespace std;
        typedef long long LL;
        const int N = 55, M = 35, INF = 1e9;
        int n;
        int w[N];
        LL f[N][N][M];
        
        void add(LL a[], LL b[])
        {
            static LL c[M];
            memset(c, 0, sizeof c);
            for (int i = 0, t = 0; i < M; i ++ )
            {
                t += a[i] + b[i];
                c[i] = t % 10;
                t /= 10;
            }
            memcpy(a, c, sizeof c);
        }
        void mul(LL a[], LL b)
        {
            static LL c[M];
            memset(c, 0, sizeof c);
            LL t = 0;
            for (int i = 0; i < M; i ++ )
            {
                t += a[i] * b;
                c[i] = t % 10;
                t /= 10;
            }
            memcpy(a, c, sizeof c);
        }
        
        int cmp(LL a[], LL b[])
        {
            for (int i = M - 1; i >= 0; i -- )
                if (a[i] > b[i]) return 1;
                else if (a[i] < b[i]) return -1;
            return 0;
        }
        
        void print(LL a[])
        {
            int k = M - 1;
            while (k && !a[k]) k -- ;
            while (k >= 0) cout << a[k -- ];
            cout << endl;
        }
        
        int main()
        {
            cin >> n;
            for (int i = 1; i <= n; i ++ ) cin >> w[i];
        
            LL temp[M];
            for (int len = 3; len <= n; len ++ )
                for (int l = 1; l + len - 1 <= n; l ++ )
                {
                    int r = l + len - 1;
                    f[l][r][M - 1] = 1;
                    for (int k = l + 1; k < r; k ++ )
                    {
                        memset(temp, 0, sizeof temp);
                        temp[0] = w[l];
                        mul(temp, w[k]);
                        mul(temp, w[r]);
                        add(temp, f[l][k]);
                        add(temp, f[k][r]);
                        if (cmp(f[l][r], temp) > 0)
                            memcpy(f[l][r], temp, sizeof temp);
                    }
                }
        
            print(f[1][n]);
        
            return 0;
        }
        ```
        

## 4. äºŒç»´åŒºé—´DP

    ç­‰å¾…å¡«å……


# æ•°ä½DP

## æŠ€å·§1ï¼š[X, Y] â‡’ f(Y) - f(X-1)

## æŠ€å·§2ï¼šæ ‘çš„è§’åº¦æ¥è€ƒè™‘

## **1081. åº¦çš„æ•°é‡**

- é¢˜ç›®
    
    æ±‚ç»™å®šåŒºé—´ [X,Y] ä¸­æ»¡è¶³ä¸‹åˆ—æ¡ä»¶çš„æ•´æ•°ä¸ªæ•°ï¼šè¿™ä¸ªæ•°æ°å¥½ç­‰äº K ä¸ªäº’ä¸ç›¸ç­‰çš„ B çš„æ•´æ•°æ¬¡å¹‚ä¹‹å’Œã€‚
    
    ä¾‹å¦‚ï¼Œè®¾ X = 15, Y = 20, K = 2, B = 2ï¼Œåˆ™æœ‰ä¸”ä»…æœ‰ä¸‹åˆ—ä¸‰ä¸ªæ•°æ»¡è¶³é¢˜æ„ï¼š
    
    17 = 2^4 + 2^0
    18 = 2^4 + 2^1
    20 = 2^4 + 2^2
    
    ### è¾“å…¥æ ¼å¼
    
    ç¬¬ä¸€è¡ŒåŒ…å«ä¸¤ä¸ªæ•´æ•° X å’Œ Yï¼Œæ¥ä¸‹æ¥ä¸¤è¡ŒåŒ…å«æ•´æ•° K å’Œ Bã€‚
    
    ### è¾“å‡ºæ ¼å¼
    
    åªåŒ…å«ä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºæ»¡è¶³æ¡ä»¶çš„æ•°çš„ä¸ªæ•°ã€‚
    
    ### æ•°æ®èŒƒå›´
    
    1 â‰¤ X â‰¤ Y â‰¤ 2^{31}-1,
    1 â‰¤ K â‰¤ 20,
    2 â‰¤ B â‰¤ 10
    
    ### è¾“å…¥æ ·ä¾‹ï¼š
    
    ```
    15 20
    2
    2
    ```
    
    ### è¾“å‡ºæ ·ä¾‹ï¼š
    
    ```
    3
    ```
    
- [è§£ç­”](https://www.acwing.com/solution/content/34003/)
    
    ```cpp
    #include <iostream>
    #include <cstring>
    #include <algorithm>
    #include <vector>
    using namespace std;
    const int N = 35;
    int f[N][N];
    int X, Y, K, B;
    void init(){
        for(int i = 0; i < N; i ++)
            for(int j = 0; j <= i; j ++)
                if(!j) f[i][j] = 1;
                else f[i][j] = f[i - 1][j] + f[i - 1][j - 1];
    }
    int cnt(int n){
        if(n == 0) return 0;
        vector<int> nums;
        while(n) nums.push_back(n % B), n /= B;
        int res = 0;
        int last = 0;
        for(int i = nums.size() - 1; i >= 0; i --){
            int x = nums[i];
            if(x > 0){
                res += f[i][K - last];
                if(x > 1){
                    if(K - last - 1 >= 0) res += f[i][K - last - 1];
                    break;
                }
                else{
                    last ++;
                    if(last > K) break;
                }
            }
            if(!i && last == K) res ++;
        }
        return res;
    }
    int main(){
        init();
        cin >> X >> Y >> K >> B;
        cout << cnt(Y) - cnt(X - 1) << endl;
        return 0;
    }
    ```